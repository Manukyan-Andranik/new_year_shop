{% extends "base.html" %}

{% block title %}
{{ offer_title }} ‚Äî ’ì’°’µ’ø’µ’° ’Ü’æ’•÷Ä-’¶’°÷Ä’§’•÷Ä
{% endblock %}

{% block content %}
<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        overflow-x: hidden;
        min-height: 100vh;
        color: white;
        position: relative;
    }

    .global-animated-bg {
        position: fixed;
        inset: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, #0f3d1f 0%, #1a5a2d 50%, #0f3d1f 100%);
        z-index: 0;
        pointer-events: none;
    }

    .animated-toys-container,
    #snowflakes-container {
        position: fixed;
        inset: 0;
        width: 100%;
        height: 100%;
        z-index: 1;
        pointer-events: none;
    }

    .animated-toy {
        position: absolute;
        width: 180px;
        opacity: 0.1;
        animation: randomWalk 14s ease-in-out infinite;
    }

    @keyframes randomWalk {
        0% {
            transform: translate(0, 0) rotate(0deg);
        }

        50% {
            transform: translate(60px, 80px) rotate(30deg);
        }

        100% {
            transform: translate(0, 0) rotate(0deg);
        }
    }

    .offer-details-container {
        position: relative;
        z-index: 10;
        max-width: 1400px;
        margin: 120px auto 60px;
        padding: 40px 20px;
    }

    .back-btn {
        display: inline-block;
        background: rgba(255, 255, 255, 0.95);
        color: #1a5a2d;
        padding: 12px 24px;
        border-radius: 25px;
        text-decoration: none;
        margin-bottom: 30px;
        font-weight: 600;
        transition: 0.3s;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    .back-btn:hover {
        transform: translateX(-5px);
    }

    /* MERGED CORPORATE HEADER SECTION */
    .corporate-header-section {
        background: linear-gradient(135deg, rgba(255, 255, 255, 0.98) 0%, rgba(245, 250, 255, 0.98) 100%);
        border-radius: 24px;
        padding: 50px 40px;
        margin-bottom: 30px;
        box-shadow: 0 12px 40px rgba(26, 90, 45, 0.12);
        border: 2px solid rgba(26, 90, 45, 0.1);
    }

    .corporate-header-content {
        display: flex;
        gap: 40px;
        align-items: flex-start;
        justify-content: space-between;
        flex-wrap: wrap;
    }

    .corporate-header-text {
        flex: 1;
        min-width: 300px;
        max-width: 600px;
    }

    .corporate-header-title {
        font-size: clamp(2rem, 5vw, 3rem);
        color: #1a5a2d;
        font-weight: 800;
        margin-bottom: 20px;
        display: flex;
        align-items: center;
        gap: 15px;
    }

    .corporate-header-description {
        white-space: pre-wrap;
        line-height: 1.8;
        color: #1f2937;
        font-size: 1.1rem;
        margin-bottom: 25px;
    }

    .corporate-header-showcase {
        flex: 1;
        min-width: 300px;
        max-width: 500px;
        position: relative;
    }

    .corporate-example-badge {
        position: absolute;
        top: -15px;
        right: -15px;
        background: linear-gradient(135deg, #1a5a2d 0%, #0f3d1f 100%);
        color: white;
        padding: 10px 20px;
        border-radius: 25px;
        font-weight: 700;
        font-size: 0.9rem;
        box-shadow: 0 6px 20px rgba(26, 90, 45, 0.4);
        z-index: 10;
        animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse {

        0%,
        100% {
            transform: scale(1);
        }

        50% {
            transform: scale(1.05);
        }
    }

    .corporate-example-main-image {
        width: 100%;
        height: auto;
        min-height: 350px;
        object-fit: contain;
        border-radius: 20px;
        background: linear-gradient(180deg, rgba(255, 255, 255, 1), rgba(248, 250, 252, 1));
        padding: 30px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        border: 3px solid rgba(26, 90, 45, 0.15);
        transition: transform 0.4s ease, box-shadow 0.4s ease;
    }

    .corporate-example-main-image:hover {
        transform: scale(1.03);
        box-shadow: 0 15px 45px rgba(26, 90, 45, 0.2);
    }

    .corporate-features-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 20px;
        margin: 30px 0;
    }

    .corporate-feature {
        background: white;
        padding: 20px 25px;
        border-radius: 16px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        border-left: 4px solid #1a5a2d;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .corporate-feature:hover {
        transform: translateX(8px);
        box-shadow: 0 6px 20px rgba(26, 90, 45, 0.15);
    }

    .corporate-feature-icon {
        font-size: 1.5rem;
        margin-right: 12px;
    }

    .corporate-feature-title {
        font-weight: 700;
        color: #1a5a2d;
        font-size: 1.1rem;
        margin-bottom: 8px;
        display: flex;
        align-items: center;
    }

    .corporate-feature-description {
        color: #4b5563;
        font-size: 0.95rem;
        line-height: 1.6;
    }

    .corporate-cta-box {
        background: linear-gradient(135deg, #1a5a2d 0%, #0f3d1f 100%);
        color: white;
        padding: 25px;
        border-radius: 16px;
        text-align: center;
        margin-top: 25px;
        box-shadow: 0 8px 25px rgba(26, 90, 45, 0.3);
    }

    .corporate-cta-text {
        font-size: 1.1rem;
        font-weight: 600;
        margin-bottom: 8px;
    }

    .corporate-cta-subtext {
        font-size: 0.9rem;
        opacity: 0.9;
    }

    /* Regular offer header for non-corporate offers */
    .offer-header {
        background: rgba(255, 255, 255, 0.97);
        padding: 30px;
        border-radius: 20px;
        margin-bottom: 30px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
    }

    .offer-title {
        font-size: clamp(2rem, 5vw, 3rem);
        color: #1a5a2d;
        font-weight: 800;
        margin-bottom: 15px;
    }

    .offer-description {
        white-space: pre-wrap;
        line-height: 1.8;
        color: #1f2937;
        font-size: 1.05rem;
    }

    /* Example Gallery Styles - FIXED FOR RESPONSIVE IMAGES */
    .example-gallery-section {
        background: rgba(255, 255, 255, 0.97);
        border-radius: 20px;
        padding: 30px;
        margin-bottom: 30px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
    }

    .example-gallery-title {
        font-size: 1.6rem;
        color: #1a5a2d;
        font-weight: 700;
        margin-bottom: 25px;
        text-align: center;
    }

    .example-gallery-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 25px;
        width: 100%;
    }

    .example-gallery-card {
        background: rgba(255, 255, 255, 0.85);
        border-radius: 16px;
        padding: 20px;
        transition: transform .22s cubic-bezier(.2, .9, .3, 1), box-shadow .22s;
        border: 2px solid rgba(0, 0, 0, 0.05);
        box-shadow: 0 4px 12px rgba(10, 20, 40, 0.06);
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        min-height: 320px;
    }

    .example-gallery-card:hover {
        transform: translateY(-6px);
        box-shadow: 0 12px 25px rgba(10, 20, 40, 0.15);
    }

    .example-gallery-image {
        width: 100%;
        max-width: 100%;
        height: auto;
        aspect-ratio: 1/1;
        object-fit: contain;
        border-radius: 12px;
        background: linear-gradient(180deg, rgba(255, 255, 255, 0.95), rgba(245, 245, 245, 1));
        padding: 12px;
        border: 1px solid rgba(0, 0, 0, 0.03);
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.08);
        margin-bottom: 15px;
        transition: transform 0.3s ease;
    }

    .example-gallery-card:hover .example-gallery-image {
        transform: scale(1.05);
    }

    .example-gallery-info {
        display: flex;
        flex-direction: column;
        gap: 8px;
        width: 100%;
        padding: 0 10px;
    }

    .example-gallery-name {
        font-weight: 800;
        font-size: 16px;
        color: #222;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        margin-bottom: 5px;
    }

    .example-gallery-description {
        color: #666;
        font-size: 14px;
        line-height: 1.4;
    }

    .content-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 30px;
    }

    /* Product Catalog Section */
    .catalog-section {
        background: rgba(255, 255, 255, 0.97);
        border-radius: 20px;
        padding: 30px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
        max-height: 900px;
        overflow-y: auto;
        display: grid;
    }

    .catalog-title {
        font-size: 1.6rem;
        color: #1a5a2d;
        font-weight: 700;
        margin-bottom: 20px;
        text-align: center;
    }

    .product-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 8px;
        width: 100%;
    }

    .product-card {
        background: rgba(255, 255, 255, 0.65);
        border-radius: 16px;
        padding: 20px;
        cursor: pointer;
        transition: transform .22s cubic-bezier(.2, .9, .3, 1), box-shadow .22s, border-color .22s;
        position: relative;
        border: 2px solid rgba(0, 0, 0, 0.05);
        box-shadow: 0 4px 12px rgba(10, 20, 40, 0.06);
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        min-height: 320px;
    }

    .product-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 8px 20px rgba(10, 20, 40, 0.12);
    }

    .product-card.selected {
        border-color: #1a5a2d;
        box-shadow: 0 6px 20px rgba(26, 90, 45, 0.3);
        background: rgba(26, 90, 45, 0.1);
    }

    /* Delivery Section Styles */
    .delivery-section {
        border-top: 1px dashed #ccc;
        margin-top: 16px;
        padding-top: 12px;
    }

    .delivery-title {
        font-size: 1rem;
        margin-bottom: 12px;
        color: #1a5a2d;
        font-weight: 600;
    }

    .delivery-section .form-group {
        margin-bottom: 12px;
        color: #374151;
    }

    .delivery-section label {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 0.9rem;
        cursor: pointer;
        padding: 4px 0;
        transition: color 0.3s ease;
    }

    .delivery-section label:hover {
        color: #1a5a2d;
    }

    .delivery-section input[type="radio"] {
        width: 16px;
        height: 16px;
        cursor: pointer;
    }

    #delivery-message {
        margin-top: 8px;
        color: #b83232;
        font-size: 0.85rem;
    }

    #delivery-address-container {
        display: none;
        margin-top: 8px;
        animation: slideDown 0.3s ease;
    }

    #delivery-address {
        width: 100%;
        padding: 8px 12px;
        border: 1px solid #ccc;
        border-radius: 6px;
        font-size: 0.9rem;
        transition: border-color 0.3s ease;
    }

    #delivery-address:focus {
        outline: none;
        border-color: #1a5a2d;
        box-shadow: 0 0 0 2px rgba(26, 90, 45, 0.1);
    }

    .card-top {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 8px;
        width: 100%;
    }

    .product-image {
        width: 100%;
        max-width: 100%;
        height: auto;
        aspect-ratio: 1/1;
        object-fit: contain;
        border-radius: 12px;
        background: linear-gradient(180deg, rgba(255, 255, 255, 0.95), rgba(245, 245, 245, 1));
        padding: 12px;
        border: 1px solid rgba(0, 0, 0, 0.03);
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.08);
        margin-bottom: 15px;
        transition: transform 0.3s ease;
    }

    .product-card:hover .product-image {
        transform: scale(1.05);
    }

    .product-info {
        display: flex;
        flex-direction: column;
        gap: 8px;
        width: 100%;
        padding: 0 10px;
    }

    .product-name {
        font-weight: 800;
        font-size: 16px;
        color: #222;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        margin-bottom: 5px;
    }

    .product-price {
        color: #1a5a2d;
        font-weight: 900;
        font-size: 15px;
        font-size: 1.1em;
    }

    .select-indicator {
        position: absolute;
        top: 12px;
        right: 12px;
        width: 28px;
        height: 28px;
        border-radius: 50%;
        background: #1a5a2d;
        color: white;
        display: none;
        align-items: center;
        justify-content: center;
        font-size: 16px;
        z-index: 2;
    }

    .product-card.selected .select-indicator {
        display: flex;
    }

    /* Image Gallery for christmas_together and seasons_best */
    .image-gallery {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 20px;
    }

    .gallery-card {
        background: rgba(255, 255, 255, 0.65);
        border-radius: 16px;
        padding: 20px;
        cursor: pointer;
        transition: transform .22s cubic-bezier(.2, .9, .3, 1), box-shadow .22s, border-color .22s;
        position: relative;
        border: 2px solid rgba(0, 0, 0, 0.05);
        box-shadow: 0 4px 12px rgba(10, 20, 40, 0.06);
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        min-height: 320px;
    }

    .gallery-card:hover {
        transform: translateY(-6px);
        box-shadow: 0 12px 25px rgba(10, 20, 40, 0.15);
    }

    .gallery-card.selected {
        border-color: #1a5a2d;
        box-shadow: 0 8px 25px rgba(26, 90, 45, 0.3);
        background: rgba(26, 90, 45, 0.1);
    }

    .gallery-image {
        width: 100%;
        max-width: 100%;
        height: auto;
        aspect-ratio: 1/1;
        object-fit: contain;
        border-radius: 12px;
        background: linear-gradient(180deg, rgba(255, 255, 255, 0.95), rgba(245, 245, 245, 1));
        padding: 12px;
        border: 1px solid rgba(0, 0, 0, 0.03);
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.08);
        margin-bottom: 15px;
        transition: transform 0.3s ease;
    }

    .gallery-card:hover .gallery-image {
        transform: scale(1.05);
    }

    .gallery-info {
        display: flex;
        flex-direction: column;
        gap: 8px;
        width:  100%;
        padding: 0 10px;
    }

    .gallery-name {
        font-weight: 800;
        font-size: 16px;
        color: #222;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        margin-bottom: 5px;
    }

    .gallery-price {
        color: #1a5a2d;
        font-weight: 900;
        font-size: 15px;
        font-size: 1.1em;
    }

    .gallery-card .select-indicator {
        position: absolute;
        top: 12px;
        right: 12px;
        width: 28px;
        height: 28px;
        border-radius: 50%;
        background: #1a5a2d;
        color: white;
        display: none;
        align-items: center;
        justify-content: center;
        font-size: 16px;
        z-index: 2;
    }

    .gallery-card.selected .select-indicator {
        display: flex;
    }

    /* Order Form Section */
    .form-section {
        background: rgba(255, 255, 255, 0.97);
        border-radius: 20px;
        padding: 30px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
        max-height: 900px;
        overflow-y: auto;
    }

    .form-title {
        font-size: 1.6rem;
        color: #1a5a2d;
        font-weight: 700;
        margin-bottom: 25px;
        text-align: center;
    }

    .form-group {
        margin-bottom: 18px;
    }

    .form-label {
        display: block;
        font-size: 0.95rem;
        color: #374151;
        margin-bottom: 6px;
        font-weight: 600;
    }

    .required {
        color: #dc2626;
    }

    .form-input,
    .form-textarea,
    .form-select {
        width: 100%;
        padding: 12px 14px;
        border-radius: 8px;
        border: 1px solid #ccc;
        font-size: 0.95rem;
        transition: all 0.3s ease;
        background: white;
        color: #1f2937;
    }

    .form-input:focus,
    .form-textarea:focus,
    .form-select:focus {
        outline: none;
        border-color: #1a5a2d;
        box-shadow: 0 0 0 3px rgba(26, 90, 45, 0.1);
    }

    .form-textarea {
        min-height: 100px;
        resize: vertical;
        font-family: inherit;
    }

    .form-checkbox {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-bottom: 15px;
    }

    .form-checkbox input {
        width: 18px;
        height: 18px;
        cursor: pointer;
    }

    .form-checkbox label {
        cursor: pointer;
        color: #374151;
        font-weight: 600;
    }

    .names-container {
        display: none;
        margin-top: 15px;
    }

    .names-container.show {
        display: block;
    }

    .name-input-group {
        display: flex;
        gap: 8px;
        margin-bottom: 10px;
    }

    .name-input-group input {
        flex: 1;
    }

    .add-name-btn,
    .remove-name-btn {
        padding: 8px 16px;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.3s ease;
    }

    .add-name-btn {
        background: #1a5a2d;
        color: white;
        width: 100%;
        margin-top: 10px;
    }

    .add-name-btn:hover {
        background: #0f3d1f;
    }

    .remove-name-btn {
        background: #dc2626;
        color: white;
    }

    .remove-name-btn:hover {
        background: #b91c1c;
    }

    .submit-btn {
        background: linear-gradient(135deg, #1a5a2d 0%, #0f3d1f 100%);
        color: white;
        border: none;
        padding: 16px;
        width: 100%;
        border-radius: 10px;
        font-weight: 700;
        font-size: 1.1rem;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(26, 90, 45, 0.3);
        margin-top: 20px;
    }

    .submit-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 25px rgba(26, 90, 45, 0.4);
    }

    .submit-btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none;
    }

    .message {
        padding: 14px;
        border-radius: 8px;
        margin-bottom: 15px;
        font-weight: 600;
        text-align: center;
        display: none;
    }

    .message.success {
        background: #d1fae5;
        color: #065f46;
        border: 2px solid #10b981;
    }

    .message.error {
        background: #fee2e2;
        color: #991b1b;
        border: 2px solid #ef4444;
    }

    .message.show {
        display: block;
        animation: slideDown 0.3s ease;
    }

    @keyframes slideDown {
        from {
            opacity: 0;
            transform: translateY(-10px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .selected-products-list {
        background: rgba(26, 90, 45, 0.05);
        padding: 15px;
        border-radius: 8px;
        margin-bottom: 20px;
        border: 1px solid rgba(26, 90, 45, 0.2);
    }

    .selected-products-title {
        font-weight: 700;
        color: #1a5a2d;
        margin-bottom: 10px;
    }

    .selected-product-item {
        display: flex;
        justify-content: space-between;
        padding: 8px;
        background: white;
        border-radius: 6px;
        margin-bottom: 8px;
        font-size: 0.9rem;
        color: var(--festive-green);
    }

    /* Responsive Design */
    @media (max-width: 1200px) {
        .offer-details-container {
            margin: 100px auto 40px;
            padding: 30px 15px;
        }

        .corporate-header-section {
            padding: 40px 30px;
        }

        .corporate-example-main-image {
            min-height: 280px;
        }
    }

    @media (max-width: 1024px) {
        .content-grid {
            grid-template-columns: 1fr;
        }

        .catalog-section,
        .form-section {
            max-height: none;
        }

        .corporate-header-content {
            flex-direction: column;
        }

        .corporate-header-section {
            padding: 35px 25px;
        }

        .corporate-header-showcase {
            max-width: 100%;
        }

        .offer-details-container {
            margin: 90px auto 40px;
        }
    }

    /* Tablet - 2 columns for example gallery */
    @media (max-width: 768px) {
        .offer-details-container {
            margin: 80px auto 30px;
            padding: 20px 12px;
        }

        .back-btn {
            padding: 10px 20px;
            font-size: 0.9rem;
        }

        /* Force 2 columns for example gallery on mobile */
        .example-gallery-grid {
            grid-template-columns: repeat(2, 1fr) !important;
            gap: 15px;
        }

        .example-gallery-card {
            min-height: auto;
            padding: 12px;
        }

        .example-gallery-image {
            aspect-ratio: 1/1;
            height: auto;
            max-height: 180px;
            padding: 8px;
        }

        .example-gallery-name {
            font-size: 13px;
            white-space: normal;
            line-height: 1.3;
            max-height: 2.6em;
            overflow: hidden;
        }

        .example-gallery-description {
            font-size: 12px;
            line-height: 1.3;
        }

        .example-gallery-info {
            padding: 0 5px;
        }

        /* Product and image grids */
        .product-grid,
        .image-gallery {
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        .gallery-card,
        .product-card {
            min-height: auto;
            padding: 12px;
        }

        .gallery-image,
        .product-image {
            aspect-ratio: 1/1;
            height: auto;
            max-height: 180px;
            padding: 8px;
        }

        .gallery-name,
        .product-name {
            font-size: 13px;
            white-space: normal;
            line-height: 1.3;
            max-height: 2.6em;
            overflow: hidden;
        }

        .gallery-price,
        .product-price {
            font-size: 13px;
        }

        .gallery-info,
        .product-info {
            padding: 0 5px;
        }

        .corporate-header-title {
            font-size: 1.5rem;
        }

        .corporate-header-description {
            font-size: 0.95rem;
        }

        .corporate-example-badge {
            font-size: 0.75rem;
            padding: 6px 12px;
            top: -8px;
            right: -8px;
        }

        .corporate-example-main-image {
            min-height: 240px;
            padding: 20px;
        }

        .corporate-features-grid {
            grid-template-columns: 1fr;
            gap: 15px;
        }

        .offer-header {
            padding: 20px;
        }

        .offer-title {
            font-size: 1.5rem;
        }

        .offer-description {
            font-size: 0.95rem;
        }

        .example-gallery-section {
            padding: 20px;
        }

        .example-gallery-title {
            font-size: 1.3rem;
            margin-bottom: 20px;
        }

        .catalog-section,
        .form-section {
            padding: 20px;
        }

        .catalog-title,
        .form-title {
            font-size: 1.3rem;
        }

        .select-indicator {
            width: 24px;
            height: 24px;
            font-size: 14px;
            top: 8px;
            right: 8px;
        }
    }

    /* Small mobile devices */
    @media (max-width: 480px) {
        .offer-details-container {
            margin: 70px auto 20px;
            padding: 15px 10px;
        }

        .back-btn {
            padding: 8px 16px;
            font-size: 0.85rem;
            margin-bottom: 20px;
        }

        /* Keep 2 columns for example gallery */
        .example-gallery-grid {
            grid-template-columns: repeat(2, 1fr) !important;
            gap: 10px;
        }

        .example-gallery-card {
            padding: 10px;
            border-radius: 12px;
        }

        .example-gallery-image {
            max-height: 150px;
            padding: 6px;
            margin-bottom: 10px;
        }

        .example-gallery-name {
            font-size: 12px;
        }

        .example-gallery-description {
            font-size: 11px;
        }

        /* Product and image grids */
        .product-grid,
        .image-gallery {
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .gallery-card,
        .product-card {
            padding: 10px;
            border-radius: 12px;
        }

        .gallery-image,
        .product-image {
            max-height: 150px;
            padding: 6px;
            margin-bottom: 10px;
        }

        .gallery-name,
        .product-name {
            font-size: 12px;
        }

        .gallery-price,
        .product-price {
            font-size: 12px;
        }

        .corporate-header-section {
            padding: 20px 15px;
            border-radius: 16px;
        }

        .corporate-header-title {
            font-size: 1.3rem;
            gap: 10px;
        }

        .corporate-header-description {
            font-size: 0.9rem;
            line-height: 1.6;
        }

        .corporate-example-badge {
            font-size: 0.7rem;
            padding: 5px 10px;
        }

        .corporate-example-main-image {
            min-height: 200px;
            padding: 15px;
            border-radius: 12px;
        }

        .offer-header {
            padding: 15px;
            border-radius: 16px;
        }

        .offer-title {
            font-size: 1.3rem;
        }

        .offer-description {
            font-size: 0.9rem;
            line-height: 1.6;
        }

        .example-gallery-section {
            padding: 15px;
            border-radius: 16px;
        }

        .example-gallery-title {
            font-size: 1.2rem;
        }

        .catalog-section,
        .form-section {
            padding: 15px;
            border-radius: 16px;
        }

        .catalog-title,
        .form-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
        }

        .form-input,
        .form-textarea,
        .form-select {
            padding: 10px 12px;
            font-size: 0.9rem;
        }

        .form-label {
            font-size: 0.9rem;
        }

        .delivery-section label {
            font-size: 0.85rem;
        }

        .delivery-title {
            font-size: 0.95rem;
        }

        .submit-btn {
            padding: 14px;
            font-size: 1rem;
        }

        .select-indicator {
            width: 22px;
            height: 22px;
            font-size: 12px;
        }
    }

    /* Extra small screens - maintain 2 columns */
    @media (max-width: 360px) {
        .offer-details-container {
            padding: 12px 8px;
        }

        /* Still keep 2 columns for all grids */
        .example-gallery-grid,
        .product-grid,
        .image-gallery {
            grid-template-columns: repeat(2, 1fr) !important;
            gap: 8px;
        }

        .example-gallery-card,
        .gallery-card,
        .product-card {
            padding: 8px;
        }

        .example-gallery-image,
        .gallery-image,
        .product-image {
            max-height: 120px;
            padding: 5px;
        }

        .example-gallery-name,
        .gallery-name,
        .product-name {
            font-size: 11px;
        }

        .example-gallery-description {
            font-size: 10px;
        }

        .example-gallery-price,
        .gallery-price,
        .product-price {
            font-size: 11px;
        }

        .corporate-header-title,
        .offer-title {
            font-size: 1.2rem;
        }

        .catalog-title,
        .form-title {
            font-size: 1.1rem;
        }
    }

    /* Landscape orientation adjustments */
    @media (max-width: 768px) and (orientation: landscape) {
        .offer-details-container {
            margin: 60px auto 20px;
        }

        .example-gallery-image,
        .gallery-image,
        .product-image {
            max-height: 140px;
        }

        .corporate-example-main-image {
            min-height: 180px;
        }
    }

    .submit-btn {
        background: linear-gradient(135deg, #1a5a2d 0%, #0f3d1f 100%);
        color: white;
        border: none;
        padding: 16px;
        width: 100%;
        border-radius: 10px;
        font-weight: 700;
        font-size: 1.1rem;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(26, 90, 45, 0.3);
        margin-top: 20px;
    }

    .submit-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 25px rgba(26, 90, 45, 0.4);
    }

    .submit-btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none;
    }
</style>

<div class="global-animated-bg">
    <div class="animated-toys-container">
        <img src="{{ url_for('static', filename='images/animated_toys/1.png') }}" class="animated-toy" alt="">
        <img src="{{ url_for('static', filename='images/animated_toys/2.png') }}" class="animated-toy" alt="">
        <img src="{{ url_for('static', filename='images/animated_toys/3.png') }}" class="animated-toy" alt="">
    </div>
    <div id="snowflakes-container"></div>
</div>

<div class="offer-details-container">
    <a href="{{ url_for('home') }}#offers" class="back-btn" data-translate="offer.back">‚Üê Back</a>

    <!-- MERGED CORPORATE HEADER SECTION -->
    <div id="corporateHeaderSection" class="corporate-header-section" style="display: none;">
        <div class="corporate-header-content">
            <div class="corporate-header-text">
                <h1 id="corporateOfferTitle" class="corporate-header-title">
                    <span>üíº</span>
                    <span data-translate="corporate.title">‘ø’∏÷Ä’∫’∏÷Ä’°’ø’´’æ ’Ü’æ’•÷Ä’∂’•÷Ä</span>
                </h1>
                <p id="corporateOfferDescription" class="corporate-header-description"></p>
            </div>

            <div class="corporate-header-showcase">
                <img src="{{BASE_PREFIX}}/static/images/offers/corporate/examples/1.jpg" alt="Corporate Example"
                    class="corporate-example-main-image">
            </div>
        </div>
    </div>

    <!-- REGULAR OFFER HEADER FOR NON-CORPORATE OFFERS -->
    <div id="regularOfferHeader" class="offer-header" style="display: none;">
        <h1 id="offerTitle" class="offer-title"></h1>
        <p id="offerDescription" class="offer-description"></p>
    </div>

    <!-- Example Images Gallery for special_for_you offers -->
    <div id="exampleGallerySection" class="example-gallery-section" style="display: none;">
        <h2 class="example-gallery-title" data-translate="offer.examples">’ï÷Ä’´’∂’°’Ø’∂’•÷Ä</h2>
        <div id="exampleGalleryGrid" class="example-gallery-grid"></div>
    </div>

    <div class="content-grid">
        <!-- Left: Product Catalog or Image Gallery -->
        <div class="catalog-section">
            <h2 id="catalogTitle" class="catalog-title"></h2>
            <div id="productGrid" class="product-grid"></div>
            <div id="imageGallery" class="image-gallery" style="display: none;"></div>
        </div>

        <!-- Right: Order Form -->
        <div class="form-section">
            <h2 class="form-title" data-translate="form.title">üìù Order Now</h2>
            <div class="message" id="formMessage"></div>

            <div id="selectedProductsList" class="selected-products-list" style="display: none;">
                <div class="selected-products-title" data-translate="order.preview">Order Preview</div>
                <div id="selectedProductsContent"></div>
            </div>
            <!-- üöö Delivery Information -->
            <div class="delivery-section">
                <h3 class="delivery-title" data-translate="delivery.title">
                    üöö Delivery Information
                </h3>

                <div class="form-group">
                    <label>
                        <input type="radio" name="delivery" value="0" data-label="Free delivery in Yerevan center" checked>
                        <span data-translate="delivery.option.center">Free delivery in Yerevan center</span>
                    </label>
                </div>

                <div class="form-group">
                    <label>
                        <input type="radio" name="delivery" value="2000" data-label="Outside Yerevan center - 2000 AMD">
                        <span data-translate="delivery.option.outside">Delivery outside Yerevan center (2000 AMD)</span>
                    </label>
                </div>

                <div class="form-group">
                    <label>
                        <input type="radio" name="delivery" value="0" data-label='Regions via "HayPost"'>
                        <span data-translate="delivery.option.regions">Regions via "HayPost" (Delivery to all regions of Armenia)</span>
                    </label>
                </div>

                <div class="form-group">
                    <label>
                        <input type="radio" name="delivery" value="custom" data-label="Your suggested delivery method">
                        <span data-translate="delivery.option.custom">Your suggested delivery method (Throughout Armenia)</span>
                    </label>
                </div>

                <div id="delivery-message" data-translate="delivery.message">
                    Be sure to specify the delivery address.
                </div>
            </div>
            
            <form id="orderForm">
                <!-- Dynamic form fields will be inserted here by JavaScript -->

                <!-- Customer Contact Information -->
                <div class="form-group">
                    <label class="form-label">${window.t ? window.t('form.customer_name') : '’Å’•÷Ä ’°’∂’∏÷Ç’∂’®'} <span class="required">*</span></label>
                    <input type="text" name="customer_name" class="form-input" required>
                </div>
                <div class="form-group">
                    <label class="form-label">${window.t ? window.t('form.customer_phone') : '’Ä’•’º’°’≠’∏’Ω'} <span class="required">*</span></label>
                    <input type="tel" name="customer_phone" class="form-input" placeholder="${window.t ? window.t('form.customer_phone.placeholder') : '+374 XX XXX XXX'}" required>
                </div>
                <div class="form-group">
                    <label class="form-label">${window.t ? window.t('form.customer_email') : '‘∑’¨‚Ä§ ÷É’∏’Ω’ø'} <span class="required">*</span></label>
                    <input type="email" name="customer_email" class="form-input" placeholder="your@email.com" required>
                </div>
                <div class="form-group">
                    <label class="form-label">${window.t ? window.t('form.delivery_date') : '‘±’Ø’∂’Ø’°’¨’æ’∏’≤ ’°’º’°÷Ñ’¥’°’∂ ’°’¥’Ω’°’©’´’æ'}</label>
                    <input type="date" name="delivery_date" class="form-input">
                </div>

                <button type="submit" class="submit-btn" id="submitBtn">${window.t ? window.t('form.submit') : 'üéÅ ’à÷Ç’≤’°÷Ä’Ø’•’¨ ’∫’°’ø’æ’•÷Ä’®'}</button>
            </form>
        </div>
    </div>
</div>

<script>
    const BASE_PREFIX = "{{ BASE_PREFIX }}";
    let currentLang = window.translationManager ? window.translationManager.currentLanguage : 'hy';

    const offerData = {
        my_classroom: {
            type: 'products',
            fields: 'my_classroom',
            translations: {
                hy: {
                    title: 'üéì ‘ª’¥ ’§’°’Ω’°÷Ä’°’∂',
                    description: `’Ü’æ’´÷Ä’•÷Ñ ’±’•÷Ä ’°’∑’°’Ø’•÷Ä’ø’∂’•÷Ä’´’∂ ’Ø’°’¥ ’∏÷Ç’Ω’°’∂’∏’≤’∂’•÷Ä’´’∂ ÷É’∏÷Ñ÷Ä’´’Ø, ’¢’°’µ÷Å ’°’∂’Ø’•’≤’Æ ’∂’æ’•÷Ä’∂’•÷Ä’ù ’±’•÷Ä ’Ω’´÷Ä’∏’æ ’∫’°’ø÷Ä’°’Ω’ø’æ’°’Æ÷â\n\n’ä’°’ø’æ’´÷Ä’•÷Ñ ’±’•÷Ä ’§’°’Ω’°÷Ä’°’∂’´ ÷Ñ’°’∂’°’Ø’∏’æ ÷á ’Ω’ø’°÷Å’•÷Ñ ’∞’°’ø’∏÷Ç’Ø ’¶’•’≤’π’•÷Ä üéÅ\n\n’ç’° ’∞’´’°’∂’°’¨’´ ’ø’°÷Ä’¢’•÷Ä’°’Ø ’ß ’°’∑’°’Ø’•÷Ä’ø’∂’•÷Ä’´’∂ ’∑’∂’∏÷Ä’∞’°’Ø’°’¨’∏÷Ç’©’µ’∏÷Ç’∂ ’∞’°’µ’ø’∂’•’¨’∏÷Ç, ’ø’∏’∂’°’Ø’°’∂ ’ø÷Ä’°’¥’°’§÷Ä’∏÷Ç’©’µ’∏÷Ç’∂ ’Ω’ø’•’≤’Æ’•’¨’∏÷Ç ÷á ’¥’´’°’Ω’´’∂ ’™’∫’ø’°’¨’∏÷Ç ’∞’°’¥’°÷Ä÷â\n\n’Ö’∏÷Ç÷Ä’°÷Ñ’°’∂’π’µ’∏÷Ç÷Ä ’∂’æ’•÷Ä’´ ’∞’°’¥’°÷Ä ’Ø’°÷Ä’∏’≤ ’•÷Ñ ’®’∂’ø÷Ä’•’¨ ’°’º’°’∂’±’´’∂ ÷É’°’©’•’©’°’æ’∏÷Ä’∏÷Ç’¥, ’´’Ω’Ø ’¥’•’∂÷Ñ ’¥’•÷Ä ’Ø’∏’≤’¥’´÷Å ’µ’∏÷Ç÷Ä’°÷Ñ’°’∂’π’µ’∏÷Ç÷Ä ’ø’∏’∫÷Ä’°’Ø’´ ’¥’•’ª ’Ø’§’∂’•’∂÷Ñ ÷É’∏÷Ñ÷Ä’´’Ø ’°’∂’°’Ø’∂’Ø’°’¨ ÷á ’ø’∏’∂’°’Ø’°’∂ ’¥’°’≤’©’°’∂÷Ñ’∂’•÷Ä ’±’•÷Ä ’Ω’°’∂’•÷Ä’´ ’∞’°’¥’°÷Ä ‚ú®`
                },
                en: {
                    title: 'üéì My Classroom',
                    description: `Give your students or classmates small but heartfelt gifts made with love.\n\nOrder in quantities for your class and receive special discounts üéÅ\n\nIt's a wonderful way to thank your students, create a festive atmosphere, and share smiles together.\n\nEach gift can come with individual packaging, and we'll include a small surprise and a festive wish for every student ‚ú®`
                },
                ru: {
                    title: 'üéì –ú–æ–π –∫–ª–∞—Å—Å',
                    description: `–ü–æ–¥–∞—Ä–∏—Ç–µ —Å–≤–æ–∏–º —É—á–µ–Ω–∏–∫–∞–º –∏–ª–∏ —Å—Ç—É–¥–µ–Ω—Ç–∞–º –Ω–µ–±–æ–ª—å—à–∏–µ, –Ω–æ –∏—Å–∫—Ä–µ–Ω–Ω–∏–µ –ø–æ–¥–∞—Ä–∫–∏, —Å–¥–µ–ª–∞–Ω–Ω—ã–µ —Å –ª—é–±–æ–≤—å—é.\n\n–ó–∞–∫–∞–∂–∏—Ç–µ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –≤–∞—à–µ–≥–æ –∫–ª–∞—Å—Å–∞ –∏ –ø–æ–ª—É—á–∏—Ç–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∫–∏–¥–∫–∏ üéÅ\n\n–≠—Ç–æ –æ—Ç–ª–∏—á–Ω—ã–π —Å–ø–æ—Å–æ–± –ø–æ–±–ª–∞–≥–æ–¥–∞—Ä–∏—Ç—å —É—á–µ–Ω–∏–∫–æ–≤, —Å–æ–∑–¥–∞—Ç—å –ø—Ä–∞–∑–¥–Ω–∏—á–Ω–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏ –≤–º–µ—Å—Ç–µ —É–ª—ã–±–Ω—É—Ç—å—Å—è.\n\n–î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–¥–∞—Ä–∫–∞ –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—É—é —É–ø–∞–∫–æ–≤–∫—É, –∞ –º—ã –ø–æ–ª–æ–∂–∏–º –≤ –∫–∞–∂–¥—ã–π –ø–∞–∫–µ—Ç–∏–∫ –º–∞–ª–µ–Ω—å–∫–∏–π —Å—é—Ä–ø—Ä–∏–∑ –∏ –ø—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è ‚ú®`
                }
            }
        },

        corporate: {
            type: 'products',
            fields: 'corporate',
            translations: {
                hy: {
                    title: 'üíº ‘ø’∏÷Ä’∫’∏÷Ä’°’ø’´’æ',
                    description: `’Ü’æ’´÷Ä’•÷Ñ ’±’•÷Ä ’©’´’¥’´’∂ ’ª’•÷Ä’¥ ’¥’©’∂’∏’¨’∏÷Ä’ø ÷á ’ø’∏’∂’°’Ø’°’∂ ’ø÷Ä’°’¥’°’§÷Ä’∏÷Ç’©’µ’∏÷Ç’∂ üí´\n\n‘≥’∂’•÷Ñ ’±’•÷Ä ’°’∑’≠’°’ø’°’Ø’´÷Å’∂’•÷Ä’´ ’Ø’°’¥ ’£’∏÷Ä’Æ’®’∂’Ø’•÷Ä’∂’•÷Ä’´ ’∞’°’¥’°÷Ä ’±’•’º’°’£’∏÷Ä’Æ ÷É’°’µ’ø’• ’≠’°’≤’°’¨’´÷Ñ’∂’•÷Ä’ù ’∏÷Ä’∫’•’Ω ’∑’∂’∏÷Ä’∞’°’Ø’°’¨’∏÷Ç’©’µ’°’∂ ÷á ’∞’∏’£’°’ø’°÷Ä’∏÷Ç’©’µ’°’∂ ’∂’∑’°’∂÷â\n\n‘±’¥÷Ä’°’∫’∂’§’•÷Ñ ’©’´’¥’°’µ’´’∂ ’∏’£’´’∂ ÷á ’¶’°÷Ä’§’°÷Ä’•÷Ñ ’±’•÷Ä ’£÷Ä’°’Ω’•’∂’µ’°’Ø’´ ’ø’∏’∂’°’Æ’°’º’® ’µ’∏÷Ç÷Ä’°’∞’°’ø’∏÷Ç’Ø ÷É’°’µ’ø’• ’≠’°’≤’°’¨’´÷Ñ’∂’•÷Ä’∏’æ÷â\n\n’ä’°’ø’æ’•÷Ä’∂’•÷Ä’® ’Ø’°÷Ä’∏’≤ ’•’∂ ’¨’´’∂’•’¨ ’¥’•÷Ä ’ø’•’Ω’°’Ø’°’∂’∏÷Ç÷Å ’Ø’°’¥ ’±’•÷Ä ’¢÷Ä’•’∂’§’°’µ’´’∂ ’∫’°’ø’Ø’•÷Ä’∂’•÷Ä’∏’æ÷â\n\n’Ñ’•’∂÷Ñ ’Ø÷É’°’©’•’©’°’æ’∏÷Ä’•’∂÷Ñ ’µ’∏÷Ç÷Ä’°÷Ñ’°’∂’π’µ’∏÷Ç÷Ä ’∂’æ’•÷Ä ’°’º’°’∂’±’´’∂’ù ’°’æ’•’¨’°÷Å’∂’•’¨’∏’æ ’ø’∏’∂’°’Ø’°’∂ ’¥’°’≤’©’°’∂÷Ñ’∂’•÷Ä ÷á ÷É’∏÷Ñ÷Ä’´’Ø ’°’∂’°’Ø’∂’Ø’°’¨’∂’•÷Ä ’µ’∏÷Ç÷Ä’°÷Ñ’°’∂’π’µ’∏÷Ç÷Ä ’ø’∏’∫÷Ä’°’Ø’´ ’¥’•’ª üéÑ`
                },
                en: {
                    title: 'üíº Corporate Gifts',
                    description: `Bring warmth and a festive mood to your team üí´\n\nGive your employees or partners handcrafted wooden ornaments as a token of gratitude and care.\n\nStrengthen team spirit and decorate your office tree with unique wooden ornaments.\n\nOrders can be from our catalog or customized with your brand imagery.\n\nWe'll pack each gift individually, adding festive wishes and small surprises to every bag üéÑ`
                },
                ru: {
                    title: 'üíº –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ –ø–æ–¥–∞—Ä–∫–∏',
                    description: `–ü–æ–¥–∞—Ä–∏—Ç–µ —Å–≤–æ–µ–π –∫–æ–º–∞–Ω–¥–µ —Ç–µ–ø–ª–æ –∏ –ø—Ä–∞–∑–¥–Ω–∏—á–Ω–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ üí´\n\n–ü–æ–¥–∞—Ä–∏—Ç–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º –∏–ª–∏ –ø–∞—Ä—Ç–Ω—ë—Ä–∞–º –¥–µ—Ä–µ–≤—è–Ω–Ω—ã–µ –∏–≥—Ä—É—à–∫–∏ —Ä—É—á–Ω–æ–π —Ä–∞–±–æ—Ç—ã –≤ –∑–Ω–∞–∫ –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏ –∏ –∑–∞–±–æ—Ç—ã.\n\n–£–∫—Ä–µ–ø–∏—Ç–µ –∫–æ–º–∞–Ω–¥–Ω—ã–π –¥—É—Ö –∏ —É–∫—Ä–∞—Å—å—Ç–µ –æ—Ñ–∏—Å–Ω—É—é —ë–ª–∫—É —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ –¥–µ—Ä–µ–≤—è–Ω–Ω—ã–º–∏ —É–∫—Ä–∞—à–µ–Ω–∏—è–º–∏.\n\n–ó–∞–∫–∞–∑—ã –º–æ–≥—É—Ç –±—ã—Ç—å –∫–∞–∫ –∏–∑ –Ω–∞—à–µ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏, —Ç–∞–∫ –∏ —Å –≤–∞—à–∏–º –±—Ä–µ–Ω–¥–∏–Ω–≥–æ–º.\n\n–ú—ã —É–ø–∞–∫—É–µ–º –∫–∞–∂–¥—ã–π –ø–æ–¥–∞—Ä–æ–∫ –æ—Ç–¥–µ–ª—å–Ω–æ, –¥–æ–±–∞–≤–∏–≤ –ø—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è –∏ –º–∞–ª–µ–Ω—å–∫–∏–µ —Å—é—Ä–ø—Ä–∏–∑—ã üéÑ`
                }
            }
        },

        special_for_you: {
            type: 'products',
            fields: 'special_for_you',
            translations: {
                hy: {
                    title: 'üíñ ’Ä’°’ø’∏÷Ç’Ø ÷Ñ’•’¶ ’∞’°’¥’°÷Ä',
                    description: `’î’∏ ’°’∂’∏÷Ç’∂’∏’æ ’∞÷Ä’°’∑÷Ñ üíå\n\n‘±’µ’Ω ’¢’°’™’∂’∏÷Ç’¥ ’µ’∏÷Ç÷Ä’°÷Ñ’°’∂’π’µ’∏÷Ç÷Ä ’∂’æ’•÷Ä ’Ø’°÷Ä’∏’≤ ’ß ’§’°’º’∂’°’¨ ’¢’°÷Å’°’º’´’Ø’ù ÷Ñ’∏ ’°’∂’∏÷Ç’∂’∏’æ, ’∫’°’ø’¥’∏÷Ç’©’µ’°’¥’¢ ÷á ÷Å’°’∂’Ø’∏÷Ç’©’µ’°’¥’¢÷â\n\n’ä’°’ø’æ’´÷Ä’•÷Ñ ’°’∂’æ’°’∂’°’Ø’°’∂ ÷É’°’µ’ø’• ’≠’°’≤’°’¨’´÷Ñ’∂’•÷Ä ’±’•÷Ä ’¥’ø’•÷Ä’´’¥’∂’•÷Ä’´ ’∞’°’¥’°÷Ä ÷á ’§’°÷Ä’±÷Ä’•÷Ñ ’±’•÷Ä ’∂’æ’•÷Ä’∂’•÷Ä’® ’´’Ω’Ø’°’∫’•’Ω ’°’∂’±’∂’°’Ø’°’∂ ’∏÷Ç ’°’∂’Ø÷Ä’Ø’∂’•’¨’´÷â\n\n’ç’° ’°’µ’∂ ’¥’°’∂÷Ä’∏÷Ç÷Ñ’∂ ’ß, ’∏÷Ä’® ’Ω’∏’æ’∏÷Ä’°’Ø’°’∂ ’∂’æ’•÷Ä’® ’§’°÷Ä’±’∂’∏÷Ç’¥ ’ß ’∞’´’∑’∏’≤’∏÷Ç’©’µ’∏÷Ç’∂’ù ’Ω’´÷Ä’∏’æ ’∫’°’ø÷Ä’°’Ω’ø’æ’°’Æ ’∞’•’∂÷Å ÷Ñ’•’¶ ’∞’°’¥’°÷Ä÷â`
                },
                en: {
                    title: 'üíñ Special for You',
                    description: `A personalized miracle üíå\n\nEvery gift here can become unique‚Äîwith your name, story, and wishes.\n\nOrder personalized wooden ornaments for your loved ones and make your gifts truly personal and unforgettable.\n\nIt's the little detail that turns an ordinary gift into a cherished memory made with love.`
                },
                ru: {
                    title: 'üíñ –û—Å–æ–±–µ–Ω–Ω—ã–π –¥–ª—è —Ç–µ–±—è',
                    description: `–ß—É–¥–æ —Å —Ç–≤–æ–∏–º –∏–º–µ–Ω–µ–º üíå\n\n–ö–∞–∂–¥—ã–π –ø–æ–¥–∞—Ä–æ–∫ –∑–¥–µ—Å—å –º–æ–∂–µ—Ç —Å—Ç–∞—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º ‚Äî —Å —Ç–≤–æ–∏–º –∏–º–µ–Ω–µ–º, –∏—Å—Ç–æ—Ä–∏–µ–π –∏ –ø–æ–∂–µ–ª–∞–Ω–∏–µ–º.\n\n–ó–∞–∫–∞–∂–∏—Ç–µ –∏–º–µ–Ω–Ω—ã–µ –¥–µ—Ä–µ–≤—è–Ω–Ω—ã–µ –∏–≥—Ä—É—à–∫–∏ –¥–ª—è —Å–≤–æ–∏—Ö –±–ª–∏–∑–∫–∏—Ö –∏ —Å–¥–µ–ª–∞–π—Ç–µ —Å–≤–æ–∏ –ø–æ–¥–∞—Ä–∫–∏ –ø–æ-–Ω–∞—Å—Ç–æ—è—â–µ–º—É –ª–∏—á–Ω—ã–º–∏ –∏ –Ω–µ–ø–æ–≤—Ç–æ—Ä–∏–º—ã–º–∏.\n\n–≠—Ç–æ —Ç–∞ –¥–µ—Ç–∞–ª—å, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –æ–±—ã—á–Ω—ã–π –ø–æ–¥–∞—Ä–æ–∫ –≤ –ø–∞–º—è—Ç—å, —Å–æ–∑–¥–∞–Ω–Ω—É—é —Å –ª—é–±–æ–≤—å—é.`
                }
            }
        },

        christmas_together: {
            type: 'images',
            imagesCount: 5,
            folder: 'offers/christmas_together',
            fields: 'christmas_together',
            prices: [2950, 2950, 3950, 5200, 3950],

            names: {
                "hy": {
                    1: "’è’∏’∂’°’Ø’°’∂ ‘∏’∂’ø’°’∂’´÷Ñ",
                    2: "’Ä÷Ä’°’∑÷Ñ’´ ’á÷Ä’ª’°’∂’°’Ø’∏÷Ç’¥",
                    3: "‘±’¥’°’∂’∏÷Ä’µ’° ‘Ω’°’≤’°’≤’∏÷Ç’©’µ’∏÷Ç’∂",
                    4: "’è’°’∂ ’ã’•÷Ä’¥’∏÷Ç’©’µ’∏÷Ç’∂",
                    5: "’Ñ’•÷Ä ’Ñ’•’Æ ’Ä÷Ä’°’∑÷Ñ’®"
                },
                "en": {
                    1: "Festive Family",
                    2: "In the Frame of a Miracle",
                    3: "New Year Peace",
                    4: "Warmth of Home",
                    5: "Our Great Miracle"
                },
                "ru": {
                    1: "–ü—Ä–∞–∑–¥–Ω–∏—á–Ω–∞—è —Å–µ–º—å—è",
                    2: "–í –æ–±—ä—è—Ç–∏—è—Ö —á—É–¥–∞",
                    3: "–ù–æ–≤–æ–≥–æ–¥–Ω–∏–π –ø–æ–∫–æ–π",
                    4: "–¢–µ–ø–ª–æ –¥–æ–º–∞",
                    5: "–ù–∞—à–µ –≤–µ–ª–∏–∫–æ–µ —á—É–¥–æ"
                }
            },

            translations: {
                hy: {
                    title: 'üè° ‘±’¥’°’∂’∏÷Ä’® ’¥’´’°’Ω’´’∂',
                    description: `’è’∏’∂’•÷Ñ ’®’∂’ø’°’∂’´÷Ñ’´ ’∞’•’ø’ù ’¨’´ ’Ω’´÷Ä’∏’æ, ’™’∫’´’ø’∂’•÷Ä’∏’æ ÷á ÷É’°’µ’ø’• ’∞÷Ä’°’∑÷Ñ’∂’•÷Ä’∏’æ ‚ù§Ô∏è\n\n’Ü’æ’´÷Ä’•÷Ñ ’±’•÷Ä ’Ω’´÷Ä’•’¨’´’∂’•÷Ä’´’∂ ÷É’∏÷Ñ÷Ä’´’Ø ’≠’°’≤’°’¨’´÷Ñ’∂’•÷Ä ’Ø’°’¥ ’¶’°÷Ä’§’°÷Ä’•÷Ñ ’®’∂’ø’°’∂’•’Ø’°’∂ ’ø’∏’∂’°’Æ’°’º’® ’¥’•÷Ä ’±’•’º’°’£’∏÷Ä’Æ ’∞’°’æ’°÷Ñ’°’Æ’∏÷Ç’∂’•÷Ä’∏’æ÷â\n\n’Ñ’•÷Ä ’∂’°’≠’°’∫’•’Ω ’®’∂’ø÷Ä’æ’°’Æ ’∞’°’æ’°÷Ñ’°’Æ’∏÷Ç’∂’•÷Ä’´ ’∑’∂’∏÷Ä’∞’´’æ ’§’∏÷Ç÷Ñ ’∞’•’∑’ø’∏÷Ç’©’µ’°’¥’¢ ’Ø’®’∂’ø÷Ä’•÷Ñ ’¥’´ ÷Ñ’°’∂’´ ’£’•’≤’•÷Å’´’Ø ’≠’°’≤’°’¨’´÷Ñ’ù ’∂’°’≠’°’ø’•’Ω’æ’°’Æ ’±’•÷Ä ’®’∂’ø’°’∂’´÷Ñ’´ ’µ’∏÷Ç÷Ä’°÷Ñ’°’∂’π’µ’∏÷Ç÷Ä ’°’∂’§’°’¥’´ ’∞’°’¥’°÷Ä÷â\n\n‘±’¥’°’∂’∏÷Ä’® ’¥’´’°’Ω’´’∂’ù ’∏÷Ä’ø’•’≤ ’µ’∏÷Ç÷Ä’°÷Ñ’°’∂’π’µ’∏÷Ç÷Ä ’≠’°’≤’°’¨’´÷Ñ ’∫’°’ø’¥’∏÷Ç’¥ ’ß ’±’•÷Ä ’ø’°’∂ ’ª’•÷Ä’¥ ’∫’°’ø’¥’∏÷Ç’©’µ’∏÷Ç’∂’® üåü`
                },
                en: {
                    title: 'üè° Christmas Together',
                    description: `Celebrate with your family‚Äîfull of love, smiles, and wooden magic ‚ù§Ô∏è\n\nGive your loved ones small gifts or decorate your family tree with our handcrafted sets.\n\nWith our pre-selected collections, you can easily choose several beautiful ornaments for each family member.\n\nChristmas together‚Äîwhere every ornament tells the warm story of your home üåü`
                },
                ru: {
                    title: 'üè° –ù–æ–≤—ã–π –≥–æ–¥ –≤–º–µ—Å—Ç–µ',
                    description: `–ü—Ä–∞–∑–¥–Ω—É–π—Ç–µ —Å —Å–µ–º—å—ë–π ‚Äî —Å –ª—é–±–æ–≤—å—é, —É–ª—ã–±–∫–∞–º–∏ –∏ –¥–µ—Ä–µ–≤—è–Ω–Ω—ã–º–∏ —á—É–¥–µ—Å–∞–º–∏ ‚ù§Ô∏è\n\n–ü–æ–¥–∞—Ä–∏—Ç–µ –±–ª–∏–∑–∫–∏–º –Ω–µ–±–æ–ª—å—à–∏–µ –∏–≥—Ä—É—à–∫–∏ –∏–ª–∏ —É–∫—Ä–∞—Å—å—Ç–µ —Å–µ–º–µ–π–Ω—É—é —ë–ª–∫—É –Ω–∞—à–∏–º–∏ –Ω–∞–±–æ—Ä–∞–º–∏ —Ä—É—á–Ω–æ–π —Ä–∞–±–æ—Ç—ã.\n\n–ë–ª–∞–≥–æ–¥–∞—Ä—è –Ω–∞—à–∏–º –≥–æ—Ç–æ–≤—ã–º –∫–æ–ª–ª–µ–∫—Ü–∏—è–º –≤—ã –ª–µ–≥–∫–æ –ø–æ–¥–±–µ—Ä—ë—Ç–µ –∫—Ä–∞—Å–∏–≤—ã–µ —É–∫—Ä–∞—à–µ–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —á–ª–µ–Ω–∞ —Å–µ–º—å–∏.\n\n–ù–æ–≤—ã–π –≥–æ–¥ –≤–º–µ—Å—Ç–µ ‚Äî –≥–¥–µ –∫–∞–∂–¥–∞—è –∏–≥—Ä—É—à–∫–∞ —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–µ—Ç —Ç—ë–ø–ª—É—é –∏—Å—Ç–æ—Ä–∏—é –≤–∞—à–µ–≥–æ –¥–æ–º–∞ üåü`
                }
            }
        },

        seasons_best: {
            type: 'images',
            imagesCount: 10,
            prices: [3200, 3500, 6900, 7650, 8750, 8000, 8750, 7900, 10900, 8400],
            names: {
                "hy": {
                    1: "’Å’¥’•’º’°’µ’´’∂ ’™’∫’´’ø’∂’•÷Ä",
                    2: "’è’∏’∂’°’Ø’°’∂ ’∞÷Ä’°’∑÷Ñ",
                    3: "’Ñ’∏’£’°’Ø’°’∂ ‘±’¥’°’∂’∏÷Ä",
                    4: "’è’°÷Ä’æ’° ’∞÷Ä’°’∑÷Ñ’®",
                    5: "’Å’´’∏÷Ç’Ø’∂’•÷Ä’´ ’°’∑’≠’°÷Ä’∞",
                    6: "’è’∏’∂’°’Ø’°’∂ ’∑÷Ñ’•÷Ä’©",
                    7: "’Å’¥’•’º’æ’° ’∞÷Ä’°’∑÷Ñ’®",
                    8: "‘±’¥’°’∂’∏÷Ä’µ’° ‘≥’¨’≠’°÷Ä’Ø",
                    9: "‘±’¥’°’∂’∏÷Ä’µ’° ’°’∂’ø’°’º",
                    10: "’Å’¥’•’º’æ’° ’£’°’≤’ø’∂’´÷Ñ’®"
                },
                "en": {
                    1: "Winter Smiles",
                    2: "Festive Miracle",
                    3: "Magical New Year",
                    4: "Miracle of the Year",
                    5: "World of Horses",
                    6: "Festive Parade",
                    7: "Winter Wonder",
                    8: "New Year Hat",
                    9: "New Year Forest",
                    10: "Winter Secret"
                },
                "ru": {
                    1: "–ó–∏–º–Ω–∏–µ —É–ª—ã–±–∫–∏",
                    2: "–ü—Ä–∞–∑–¥–Ω–∏—á–Ω–æ–µ —á—É–¥–æ",
                    3: "–í–æ–ª—à–µ–±–Ω—ã–π –ù–æ–≤—ã–π –≥–æ–¥",
                    4: "–ß—É–¥–æ –≥–æ–¥–∞",
                    5: "–ú–∏—Ä –ª–æ—à–∞–¥–æ–∫",
                    6: "–ü—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–π –ø–∞—Ä–∞–¥",
                    7: "–ó–∏–º–Ω–µ–µ —á—É–¥–æ",
                    8: "–ù–æ–≤–æ–≥–æ–¥–Ω—è—è —à–∞–ø–∫–∞",
                    9: "–ù–æ–≤–æ–≥–æ–¥–Ω–∏–π –ª–µ—Å",
                    10: "–ó–∏–º–Ω—è—è —Ç–∞–π–Ω–∞"
                }
            },

            folder: 'offers/seasons_best',
            fields: 'seasons_best',
            translations: {
                hy: {
                    title: 'üéÅ ’ç’•’¶’∏’∂’´ ’¨’°’æ’°’£’∏÷Ç’µ’∂’∂’•÷Ä’®',
                    description: `’Ö’∏÷Ç÷Ä’°÷Ñ’°’∂’π’µ’∏÷Ç÷Ä ’ø’°÷Ä’´ ’¥’•’∂÷Ñ ’Ω’ø’•’≤’Æ’∏÷Ç’¥ ’•’∂÷Ñ ’∂’∏÷Ä, ’ø’∏’∂’°’Ø’°’∂ ÷á ’Ω’´÷Ä’∏’æ ’¨’´ ’≠’°’≤’°’¨’´÷Ñ’∂’•÷Ä, ’∏÷Ä’∏’∂÷Ñ ’°÷Ä’°’£ ’§’°’º’∂’∏÷Ç’¥ ’•’∂ ’Ω’•’¶’∏’∂’´ ’Ω’´÷Ä’•’¨’´’∂’•÷Ä÷â\n\n‘±’µ’Ω ’¢’°’™’∂’∏÷Ç’¥ ’Ø’£’ø’∂’•÷Ñ ’¥’•÷Ä ’°’¥’•’∂’°’©’°÷Ä’¥, ’∫’°’∞’°’∂’ª’æ’°’Æ ÷á ’∏’£’•’∑’∂’π’∏’≤ ’≠’°’≤’°’¨’´÷Ñ’∂’•÷Ä’®’ù ’∫’°’ø÷Ä’°’Ω’ø’æ’°’Æ ’¢’°÷Ä’±÷Ä’∏÷Ä’°’Ø ÷É’°’µ’ø’´÷Å ÷á ’æ’°’º ’£’∏÷Ç’µ’∂’•÷Ä’∏’æ÷â\n\n’Ä’°’Ω÷Å÷Ä’•÷Ñ ’®’∂’ø÷Ä’•’¨ ’±’•÷Ä ’Ω’´÷Ä’•’¨’´ ’ø’°÷Ä’¢’•÷Ä’°’Ø’∂’•÷Ä’®, ÷Ñ’°’∂’´ ’§’•’º ’§÷Ä’°’∂÷Ñ ’∞’°’Ω’°’∂’•’¨’´ ’•’∂, ÷á ’¶’°÷Ä’§’°÷Ä’•÷Ñ ’±’•÷Ä ’ø’∏’∂’® ’¥’•’¶ ’∞’•’ø ’¥’´’°’Ω’´’∂ ‚ú®\n\n‘±’µ’Ω ’Ω’•’¶’∏’∂’´ ’¨’°’æ’°’£’∏÷Ç’µ’∂’∂’•÷Ä’® ’°’µ’Ω’ø’•’≤ ’•’∂’ù ’ø’°÷Ñ’∏÷Ç’©’µ’°’∂, ’∏’≥’´ ÷á ’µ’∏÷Ç÷Ä’°’∞’°’ø’Ø’∏÷Ç’©’µ’°’∂ ’¥’´’°’≠’°’º’∂’¥’°’¥’¢÷â`
                },
                en: {
                    title: "üéÅ Season's Best",
                    description: `Every year we create new, festive, and love-filled ornaments that quickly become seasonal favorites.\n\nHere you'll find our freshest, most popular, and inspiring wooden creations‚Äîcrafted from high-quality wood and painted in bright colors.\n\nChoose your favorites while they're available and make your celebration shine ‚ú®\n\nThe best of the season is here‚Äîa blend of warmth, style, and uniqueness.`
                },
                ru: {
                    title: 'üéÅ –õ—É—á—à–µ–µ —Å–µ–∑–æ–Ω–∞',
                    description: `–ö–∞–∂–¥—ã–π –≥–æ–¥ –º—ã —Å–æ–∑–¥–∞—ë–º –Ω–æ–≤—ã–µ, –ø—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–µ –∏ –Ω–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –ª—é–±–æ–≤—å—é –∏–≥—Ä—É—à–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –±—ã—Å—Ç—Ä–æ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è —Ñ–∞–≤–æ—Ä–∏—Ç–∞–º–∏ —Å–µ–∑–æ–Ω–∞.\n\n–ó–¥–µ—Å—å –≤—ã –Ω–∞–π–¥—ë—Ç–µ —Å–∞–º—ã–µ —Å–≤–µ–∂–∏–µ, –≤–æ—Å—Ç—Ä–µ–±–æ–≤–∞–Ω–Ω—ã–µ –∏ –≤–¥–æ—Ö–Ω–æ–≤–ª—è—é—â–∏–µ –∏–∑–¥–µ–ª–∏—è –∏–∑ –¥–µ—Ä–µ–≤–∞ ‚Äî –∏–∑ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ –∏ —è—Ä–∫–∏—Ö –∫—Ä–∞—Å–æ–∫.\n\n–£—Å–ø–µ–π—Ç–µ –≤—ã–±—Ä–∞—Ç—å —Å–≤–æ–∏ –ª—é–±–∏–º—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã, –ø–æ–∫–∞ –æ–Ω–∏ –¥–æ—Å—Ç—É–ø–Ω—ã, –∏ –æ—Ç–ø—Ä–∞–∑–¥–Ω—É–π—Ç–µ –≤–º–µ—Å—Ç–µ —Å –Ω–∞–º–∏ ‚ú®\n\n–õ—É—á—à–µ–µ —ç—Ç–æ–≥–æ —Å–µ–∑–æ–Ω–∞ ‚Äî —ç—Ç–æ —Å–æ—á–µ—Ç–∞–Ω–∏–µ —Ç–µ–ø–ª–∞, —Å—Ç–∏–ª—è –∏ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏.`
                }
            }
        },

        collections: {
            type: 'images',
            imagesCount: 7,
            prices: [3500, 3500, 3500, 5300, 5300, 5750, 5750],
            names: {
                "hy": {
                    1: "3+1 ’Ä÷Ä’°’∑÷Ñ",
                    2: "3+1 ’Ñ’∏’£’∏÷Ç’©’µ’∏÷Ç’∂",
                    3: "3+1 ’™’∫’´’ø",
                    4: "4+1 ’∞’•÷Ñ’´’°’©",
                    5: "4+1 ’°’∂’°’Ø’∂’Ø’°’¨",
                    6: "5+1 ’•÷Ä’°’¶’°’∂÷Ñ",
                    7: "5+1 ’∂’æ’•÷Ä"
                },
                "en": {
                    1: "3+1 Miracle",
                    2: "3+1 Magic",
                    3: "3+1 Smile",
                    4: "4+1 Fairy Tale",
                    5: "4+1 Surprise",
                    6: "5+1 Dream",
                    7: "5+1 Gift"
                },
                "ru": {
                    1: "3+1 –ß—É–¥–æ",
                    2: "3+1 –ú–∞–≥–∏—è",
                    3: "3+1 –£–ª—ã–±–∫–∞",
                    4: "4+1 –°–∫–∞–∑–∫–∞",
                    5: "4+1 –°—é—Ä–ø—Ä–∏–∑",
                    6: "5+1 –ú–µ—á—Ç–∞",
                    7: "5+1 –ü–æ–¥–∞—Ä–æ–∫"
                }
            },
            folder: 'offers/collections',
            fields: 'collections',
            translations: {
                hy: {
                    title: 'üéÅ ’Ä’°’æ’°÷Ñ’°’Æ’∏÷Ç’∂’•÷Ä',
                    description: `üí´ ’è’∏’∂’´ ’Ø’°’≠’°÷Ä’§’°’∂÷Ñ’® ’Ø’°÷Ä’∏’≤ ’ß ’¨’´’∂’•’¨ ’∂’°÷á ’∫’°÷Ä’¶ ’∏÷Ç ’¥’°’ø’π’•’¨’´ üéÑ ’Ñ’•÷Ä ÷É’°’µ’ø’• ’±’•’º’°’£’∏÷Ä’Æ ’≠’°’≤’°’¨’´÷Ñ’∂’•÷Ä’® ’∫’°’ø÷Ä’°’Ω’ø’æ’°’Æ ’•’∂ ’Ω’´÷Ä’∏’æ’ù ’°’µ’∂’∫’•’Ω, ’∏÷Ä ’µ’∏÷Ç÷Ä’°÷Ñ’°’∂’π’µ’∏÷Ç÷Ä ’£’∂’∏’æ ’∞’°’Ω’°’∂’•’¨’´ ’¨’´’∂’•’∂ ’¢’∏’¨’∏÷Ä’´’∂, ’¢’°’µ÷Å ’π’Ø’∏÷Ä÷Å’∂’•’∂ ’´÷Ä’•’∂÷Å ’ª’•÷Ä’¥’∏÷Ç’©’µ’∏÷Ç’∂’∂ ’∏÷Ç ’µ’∏÷Ç÷Ä’°’∞’°’ø’Ø’∏÷Ç’©’µ’∏÷Ç’∂’®÷â ‘∏’∂’ø÷Ä’•÷Ñ ’±’•÷Ä ’Ω’´÷Ä’•’¨’´ ’∞’°’æ’°÷Ñ’°’Æ’∏÷Ç’∂’ù ’°’º’°’∂÷Å ’°’æ’•’¨’∏÷Ä’§ ’Æ’°’≠’Ω’•÷Ä’´, ÷á ’Ω’ø’•’≤’Æ’•÷Ñ ’∞’•÷Ñ’´’°’©’°’µ’´’∂ ’¥’©’∂’∏’¨’∏÷Ä’ø’ù ’°’º’°’∂÷Å ’Ω’°’∞’¥’°’∂’∂’•÷Ä’´÷â ’Ñ’•÷Ä ’∂’∫’°’ø’°’Ø’∂ ’ß, ’∏÷Ä ’µ’∏÷Ç÷Ä’°÷Ñ’°’∂’π’µ’∏÷Ç÷Ä ’ø’∏÷Ç’∂ ’∏÷Ç’∂’•’∂’° ’´÷Ä ÷É’°’µ’ø’• ’∞÷Ä’°’∑÷Ñ’® ‚Äî ÷É’∏÷Ñ÷Ä’´’Ø, ’°’∂’Ø’•’≤’Æ ’∏÷Ç ’¥’°’ø’π’•’¨’´ ‚ú® ’à÷Ä’∏’æ’∞’•’ø÷á ’ø’∏’∂’® ’£’•’≤’•÷Å’´’Ø ’ß ’∏’π ’©’• ’°÷Ä’™’•÷Ñ’∏’æ, ’°’µ’¨ ’¶’£’°÷Å’¥’∏÷Ç’∂÷Ñ’∏’æ ‚ù§Ô∏è`
                },
                en: {
                    title: "üéÅ Collections",
                    description: `üí´ The magic of the holidays can be simple and affordable too üéÑ Our handcrafted wooden ornaments are made with love ‚Äî designed to be accessible to everyone without losing their warmth and uniqueness. Choose your favorite collection without overspending, and create a fairy-tale atmosphere without limits. Our goal is for every home to have its own wooden miracle ‚Äî small, sincere, and affordable ‚ú® Because the beauty of the holiday lies not in its price, but in its feeling ‚ù§Ô∏è`
                },
                ru: {
                    title: 'üéÅ –ö–æ–ª–ª–µ–∫—Ü–∏–∏',
                    description: `üí´ –ú–∞–≥–∏—è –ø—Ä–∞–∑–¥–Ω–∏–∫–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ—Å—Ç–æ–π –∏ –¥–æ—Å—Ç—É–ø–Ω–æ–π üéÑ –ù–∞—à–∏ –¥–µ—Ä–µ–≤—è–Ω–Ω—ã–µ –∏–≥—Ä—É—à–∫–∏ —Ä—É—á–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å–æ–∑–¥–∞–Ω—ã —Å –ª—é–±–æ–≤—å—é ‚Äî —Ç–∞–∫, —á—Ç–æ–±—ã –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –∫–∞–∂–¥–æ–º—É, –Ω–µ —Ç–µ—Ä—è—è —Ç–µ–ø–ª–∞ –∏ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏. –í—ã–±–µ—Ä–∏—Ç–µ —Å–≤–æ—é –ª—é–±–∏–º—É—é –∫–æ–ª–ª–µ–∫—Ü–∏—é –±–µ–∑ –ª–∏—à–Ω–∏—Ö –∑–∞—Ç—Ä–∞—Ç –∏ —Å–æ–∑–¥–∞–π—Ç–µ —Å–∫–∞–∑–æ—á–Ω—É—é –∞—Ç–º–æ—Å—Ñ–µ—Ä—É –±–µ–∑ –≥—Ä–∞–Ω–∏—Ü. –ù–∞—à–∞ —Ü–µ–ª—å ‚Äî —á—Ç–æ–±—ã –≤ –∫–∞–∂–¥–æ–º –¥–æ–º–µ –±—ã–ª–æ —Å–≤–æ—ë –¥–µ—Ä–µ–≤—è–Ω–Ω–æ–µ —á—É–¥–æ ‚Äî –º–∞–ª–µ–Ω—å–∫–æ–µ, –∏—Å–∫—Ä–µ–Ω–Ω–µ–µ –∏ –¥–æ—Å—Ç—É–ø–Ω–æ–µ ‚ú® –í–µ–¥—å –∫—Ä–∞—Å–æ—Ç–∞ –ø—Ä–∞–∑–¥–Ω–∏–∫–∞ ‚Äî –Ω–µ –≤ —Ü–µ–Ω–µ, –∞ –≤ —á—É–≤—Å—Ç–≤–∞—Ö ‚ù§Ô∏è`
                }
            }
        }
    };

    const offerType = '{{ offer_type }}' || 'my_classroom';
    const offer = offerData[offerType];
    let selectedProducts = [];
    let selectedImages = [];
    let selectedDeliveryPrice = 0;
    let selectedDeliveryMethod = 'Free delivery in Yerevan center';

    // Flag to prevent recursive updates
    let isUpdatingContent = false;

    function updateOfferContent() {
        if (isUpdatingContent) return;
        isUpdatingContent = true;

        currentLang = window.translationManager ? window.translationManager.currentLanguage : 'hy';

        // Show/hide appropriate header based on offer type
        const corporateHeaderSection = document.getElementById('corporateHeaderSection');
        const regularOfferHeader = document.getElementById('regularOfferHeader');
        const exampleGallerySection = document.getElementById('exampleGallerySection');

        if (offer.fields === 'corporate') {
            // Use merged corporate header
            corporateHeaderSection.style.display = 'block';
            regularOfferHeader.style.display = 'none';
            exampleGallerySection.style.display = 'none';

            // Update corporate header content directly
            document.getElementById('corporateOfferTitle').textContent = offer.translations[currentLang].title;
            document.getElementById('corporateOfferDescription').textContent = offer.translations[currentLang].description;
        } else {
            // Use regular header for other offer types
            corporateHeaderSection.style.display = 'none';
            regularOfferHeader.style.display = 'block';

            // Update regular header content
            document.getElementById('offerTitle').textContent = offer.translations[currentLang].title;
            document.getElementById('offerDescription').textContent = offer.translations[currentLang].description;

            // Show/hide example gallery for special_for_you
            if (offer.fields === 'special_for_you') {
                exampleGallerySection.style.display = 'block';
                renderExampleGallery();
            } else {
                exampleGallerySection.style.display = 'none';
            }
        }

        // Update catalog title directly
        const catalogTitle = document.getElementById('catalogTitle');
        if (offer.type === 'products') {
            catalogTitle.textContent = window.t ? window.t('offer.select_products') : '‘∏’∂’ø÷Ä’•÷Ñ ’°’∫÷Ä’°’∂÷Ñ’∂’•÷Ä';
        } else {
            catalogTitle.textContent = window.t ? window.t('offer.select_images') : '‘∏’∂’ø÷Ä’•÷Ñ ’∂’Ø’°÷Ä’∂’•÷Ä';
        }

        isUpdatingContent = false;
    }

    // Render example images gallery for special_for_you offers
    function renderExampleGallery() {
        const galleryGrid = document.getElementById('exampleGalleryGrid');
        galleryGrid.innerHTML = '';

        const exampleImages = {
            special_for_you: [
                { id: 1, name: { hy: "‘±’∂’æ’°’∂’°’Ø’°’∂ ’≠’°’≤’°’¨’´÷Ñ’∂’•÷Ä", en: "Personalized Toys", ru: "–ò–º–µ–Ω–Ω—ã–µ –∏–≥—Ä—É—à–∫–∏" }, description: { hy: "’Å’•÷Ä ’°’∂’∏÷Ç’∂’∏’æ ÷É’°’µ’ø’• ’≠’°’≤’°’¨’´÷Ñ’∂’•÷Ä", en: "Wooden toys with your name", ru: "–î–µ—Ä–µ–≤—è–Ω–Ω—ã–µ –∏–≥—Ä—É—à–∫–∏ —Å –≤–∞—à–∏–º –∏–º–µ–Ω–µ–º" } },
                { id: 2, name: { hy: "’ç’´÷Ä’∏ ’∞’°’≤’∏÷Ä’§’°’£÷Ä’∏÷Ç’©’µ’∏÷Ç’∂", en: "Love Message", ru: "–°–æ–æ–±—â–µ–Ω–∏–µ –ª—é–±–≤–∏" }, description: { hy: "’Ä’°’ø’∏÷Ç’Ø ’∞’°’≤’∏÷Ä’§’°’£÷Ä’∏÷Ç’©’µ’°’¥’¢ ’≠’°’≤’°’¨’´÷Ñ’∂’•÷Ä", en: "Toys with special messages", ru: "–ò–≥—Ä—É—à–∫–∏ —Å –æ—Å–æ–±—ã–º–∏ –ø–æ—Å–ª–∞–Ω–∏—è–º–∏" } },
                { id: 3, name: { hy: "‘±’∂’∞’°’ø’°’Ø’°’∂ ’§’´’¶’°’µ’∂", en: "Custom Design", ru: "–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω" }, description: { hy: "’Å’•÷Ä ’∂’°’≠’°’Ω’´÷Ä’∏÷Ç’©’µ’∏÷Ç’∂’∂’•÷Ä’´’∂ ’∞’°’¥’°’∫’°’ø’°’Ω’≠’°’∂", en: "According to your preferences", ru: "–°–æ–≥–ª–∞—Å–Ω–æ –≤–∞—à–∏–º –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è–º" } },
                { id: 4, name: { hy: "’Ä’´’∑’°’ø’°’Ø’´ ’∂’æ’•÷Ä", en: "Memory Gift", ru: "–ü–æ–¥–∞—Ä–æ–∫ –Ω–∞ –ø–∞–º—è—Ç—å" }, description: { hy: "‘±’∂’¥’∏’º’°’∂’°’¨’´ ’∫’°’∞’•÷Ä’´ ’∞’°’¥’°÷Ä", en: "For unforgettable moments", ru: "–î–ª—è –Ω–µ–∑–∞–±—ã–≤–∞–µ–º—ã—Ö –º–æ–º–µ–Ω—Ç–æ–≤" } }
            ]
        };

        const images = exampleImages[offer.fields] || [];

        images.forEach(image => {
            const card = document.createElement('div');
            card.className = 'example-gallery-card';

            card.innerHTML = `
                <img src="${BASE_PREFIX}/static/images/offers/${offer.fields}/examples/${image.id}.jpg" 
                     alt="${image.name[currentLang]}" 
                     class="example-gallery-image">
                <div class="example-gallery-info">
                    <div class="example-gallery-name">${image.name[currentLang]}</div>
                    <div class="example-gallery-description">${image.description[currentLang]}</div>
                </div>
            `;

            galleryGrid.appendChild(card);
        });
    }

    // Load products or images based on offer type
    async function loadCatalog() {
        if (offer.type === 'products') {
            try {
                const response = await fetch(`${BASE_PREFIX}/api/products?lang=${currentLang}&type=all`);
                const products = await response.json();
                renderProducts(products);
            } catch (error) {
                console.error('Error loading products:', error);
            }
        } else if (offer.type === 'images') {
            renderImageGallery();
        }
    }

    function renderProducts(products) {
        const grid = document.getElementById('productGrid');
        grid.innerHTML = '';

        products.forEach(product => {
            const card = document.createElement('div');
            card.className = 'product-card';
            card.setAttribute('data-product-id', product.id);
            card.innerHTML = `
                <div class="select-indicator">‚úì</div>
                <div class="card-top">
                    <img src="${BASE_PREFIX}${product.images_url_list[0]}" alt="${product.name}" class="product-image">
                    <div class="product-info">
                        <div class="product-name">${product.name}</div>
                        <div class="product-price">${product.price} ÷è</div>
                    </div>
                </div>
            `;

            card.addEventListener('click', () => toggleProductSelection(product, card));
            grid.appendChild(card);
        });
    }

    function toggleProductSelection(product, card) {
        const index = selectedProducts.findIndex(p => p.id === product.id);

        if (index > -1) {
            selectedProducts.splice(index, 1);
            card.classList.remove('selected');
        } else {
            selectedProducts.push(product);
            card.classList.add('selected');
        }

        updateSelectedProductsList();
    }

    // Update delivery price dynamically
    function setupDeliveryHandlers() {
        const deliveryRadios = document.querySelectorAll('input[name="delivery"]');

        deliveryRadios.forEach(radio => {
            radio.addEventListener('change', (event) => {
                const value = event.target.value;
                selectedDeliveryMethod = event.target.getAttribute('data-label');

                if (value === 'custom') {
                    selectedDeliveryPrice = 0;
                } else {
                    selectedDeliveryPrice = Number(value);
                }

                // Update the selected products list to reflect delivery cost
                if (offer.type === 'products') {
                    updateSelectedProductsList();
                } else if (offer.type === 'images') {
                    updateSelectedImagesList();
                }
            });
        });
    }

    // Call this function after rendering the form
    function initializeDelivery() {
        setupDeliveryHandlers();

        // Set initial delivery method
        const initialDelivery = document.querySelector('input[name="delivery"]:checked');
        if (initialDelivery) {
            selectedDeliveryMethod = initialDelivery.getAttribute('data-label');
            selectedDeliveryPrice = Number(initialDelivery.value);
        }
    }

    // Override total update to include delivery
    function updateSelectedProductsList() {
        const list = document.getElementById('selectedProductsList');
        const content = document.getElementById('selectedProductsContent');

        if (selectedProducts.length > 0) {
            list.style.display = 'block';
            const baseTotal = selectedProducts.reduce((sum, p) => sum + p.price, 0);
            const totalPrice = baseTotal + selectedDeliveryPrice;

            content.innerHTML = selectedProducts.map(p => `
                <div class="selected-product-item">
                    <span>${p.name}</span>
                    <span>${p.price} ÷è</span>
                </div>
            `).join('') + `
                ${selectedDeliveryPrice > 0 ? `
                <div class="selected-product-item">
                    <span>${selectedDeliveryMethod}</span>
                    <span>${selectedDeliveryPrice} ÷è</span>
                </div>
                ` : ''}
                <div class="selected-product-item" style="font-weight:bold; border-top:1px solid rgba(26,90,45,0.3); padding-top:10px;">
                    <span data-translate="order.total">Total:</span>
                    <span>${totalPrice} ÷è</span>
                </div>
            `;
        } else {
            list.style.display = 'none';
        }
    }

    function renderImageGallery() {
        document.getElementById('productGrid').style.display = 'none';
        const gallery = document.getElementById('imageGallery');
        gallery.style.display = 'grid';
        gallery.innerHTML = '';

        const imageCount = offer.imagesCount;
        for (let i = 1; i <= imageCount; i++) {
            const card = document.createElement('div');
            card.className = 'gallery-card';
            card.setAttribute('data-image-id', i);

            // Get name and price for this image
            const imageName = offer.names && offer.names[currentLang] ? offer.names[currentLang][i] : `Image ${i}`;
            const imagePrice = offer.prices[i - 1] ? `${offer.prices[i - 1]} ÷è` : 'Price not set';

            card.innerHTML = `
                <div class="select-indicator">‚úì</div>
                <img src="${BASE_PREFIX}/static/images/${offer.folder}/${i}.jpg" alt="${imageName}" class="gallery-image">
                <div class="gallery-info">
                    <div class="gallery-name">${imageName}</div>
                    <div class="gallery-price">${imagePrice}</div>
                </div>
            `;

            card.addEventListener('click', () => toggleImageSelection(i, card));
            gallery.appendChild(card);
        }
    }

    // FIXED: Proper toggle function for image selection/deselection
    function toggleImageSelection(imageId, card) {
        const existingIndex = selectedImages.findIndex(img => img.id === imageId);

        if (existingIndex > -1) {
            // Deselect - remove from selectedImages
            selectedImages.splice(existingIndex, 1);
            card.classList.remove('selected');
        } else {
            // Select - add to selectedImages
            const imageName = offer.names && offer.names[currentLang] ? offer.names[currentLang][imageId] : `Image ${imageId}`;
            selectedImages.push({
                "id": imageId,
                "name": imageName,
                "price": offer.prices[imageId - 1] ? offer.prices[imageId - 1] : 0
            });
            card.classList.add('selected');
        }

        updateSelectedImagesList();
    }

    function updateSelectedImagesList() {
        const list = document.getElementById('selectedProductsList');
        const content = document.getElementById('selectedProductsContent');

        if (selectedImages.length > 0) {
            list.style.display = 'block';
            const baseTotal = selectedImages.reduce((sum, img) => sum + img.price, 0);
            const totalPrice = baseTotal + selectedDeliveryPrice;

            content.innerHTML = selectedImages.map(img => `
                <div class="selected-product-item">
                    <span>${img.name}</span>
                    <span>${img.price} ÷è</span>
                </div>
            `).join('') + `
                ${selectedDeliveryPrice > 0 ? `
                <div class="selected-product-item">
                    <span>${selectedDeliveryMethod}</span>
                    <span>${selectedDeliveryPrice} ÷è</span>
                </div>
                ` : ''}
                <div class="selected-product-item" style="font-weight: bold; border-top: 1px solid rgba(26, 90, 45, 0.3); padding-top: 10px;">
                    <span data-translate="order.total">Total:</span>
                    <span>${totalPrice} ÷è</span>
                </div>
            `;
        } else {
            list.style.display = 'none';
        }
    }

    // Render form based on offer type
    function renderForm() {
        if (isUpdatingContent) return;

        const form = document.getElementById('orderForm');
        let formHTML = '';

        if (offer.fields === 'my_classroom') {
            formHTML = `
                <div class="form-group">
                    <label class="form-label">${window.t ? window.t('form.school_name') : '‘¥’∫÷Ä’∏÷Å’´ ’°’∂’∏÷Ç’∂'} <span class="required">*</span></label>
                    <input type="text" name="school_name" class="form-input" required>
                </div>
                <div class="form-group">
                    <label class="form-label">${window.t ? window.t('form.class_number') : '‘¥’°’Ω’°÷Ä’°’∂’´ ’∞’°’¥’°÷Ä'} <span class="required">*</span></label>
                    <input type="text" name="class_number" class="form-input" required>
                </div>
                <div class="form-group">
                    <label class="form-label">${window.t ? window.t('form.student_count') : '‘±’∑’°’Ø’•÷Ä’ø’∂’•÷Ä’´ ÷Ñ’°’∂’°’Ø'} <span class="required">*</span></label>
                    <input type="number" name="student_count" class="form-input" required>
                </div>
                <div class="form-group">
                    <label class="form-label">${window.t ? window.t('form.boys_girls') : '’è’≤’°’∂’•÷Ä’´/’°’≤’ª’´’Ø’∂’•÷Ä’´ ÷Ñ’°’∂’°’Ø'}</label>
                    <input type="text" name="boys_girls" class="form-input" placeholder="${window.t ? window.t('form.boys_girls.placeholder') : '’ï÷Ä’´’∂’°’Ø: 15 ’ø’≤’° / 12 ’°’≤’ª’´’Ø'}">
                </div>
                <div class="form-checkbox">
                    <input type="checkbox" id="nominal" name="nominal">
                    <label for="nominal">${window.t ? window.t('form.nominal') : '‘±’∂’æ’°’∂’°’Ø’°’∂ (’°’∂’∏÷Ç’∂’∂’•÷Ä’´ ’∞’•’ø)'}</label>
                </div>
                <div id="namesContainer" class="names-container">
                    <label class="form-label">${window.t ? window.t('form.names') : '‘±’∂’∏÷Ç’∂’∂’•÷Ä'}</label>
                    <div id="namesList"></div>
                    <button type="button" class="add-name-btn" onclick="addNameField()">+ ${window.t ? window.t('form.add_name') : '‘±’æ’•’¨’°÷Å’∂’•’¨ ’°’∂’∏÷Ç’∂'}</button>
                </div>
                <div class="form-group">
                    <label class="form-label">${window.t ? window.t('form.packaging') : '’ì’°’©’•’©’°’æ’∏÷Ä’¥’°’∂ ’ø’•’Ω’°’Ø'} <span class="required">*</span></label>
                    <select name="packaging" class="form-select" required>
                        <option value="bag">${window.t ? window.t('form.packaging.bag') : '’è’∏’∫÷Ä’°’Ø’∏÷Ç’¥'}</option>
                        <option value="box">${window.t ? window.t('form.packaging.box') : '’è’∏÷Ç÷É’∏÷Ç’¥'}</option>
                        <option value="none">${window.t ? window.t('form.packaging.none') : '‘±’º’°’∂÷Å ÷É’°’©’•’©’°’æ’∏÷Ä’¥’°’∂'}</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">${window.t ? window.t('form.notes') : '‘±’µ’¨ ’∂’∑’∏÷Ç’¥’∂’•÷Ä'}</label>
                    <textarea name="notes" class="form-textarea" placeholder="${window.t ? window.t('form.notes.placeholder') : '’Ü’Ø’°÷Ä’°’£÷Ä’•÷Ñ ’±’•÷Ä ÷Å’°’∂’Ø’∏÷Ç’©’µ’∏÷Ç’∂’∂’•÷Ä’® ’¥’°’∂÷Ä’°’¥’°’Ω’∂...'}"></textarea>
                </div>
            `;
        } else if (offer.fields === 'corporate') {
            formHTML = `
                <div class="form-group">
                    <label class="form-label">${window.t ? window.t('form.brand_name') : '‘≤÷Ä’•’∂’§’´ ’°’∂’∏÷Ç’∂'} <span class="required">*</span></label>
                    <input type="text" name="brand_name" class="form-input" required>
                </div>
                <div class="form-group">
                    <label class="form-label">${window.t ? window.t('form.toy_type') : '‘Ω’°’≤’°’¨’´÷Ñ’´ ’ø’•’Ω’°’Ø'} <span class="required">*</span></label>
                    <select name="toy_type" class="form-select" required>
                        <option value="your_brand">${window.t ? window.t('form.toy_type.your_brand') : '’Å’•÷Ä ’¢÷Ä’•’∂’§’∏’æ'}</option>
                        <option value="our_range">${window.t ? window.t('form.toy_type.our_range') : '’Ñ’•÷Ä ’ø’•’Ω’°’Ø’°’∂’∏÷Ç÷Å'}</option>
                        <option value="mixed">${window.t ? window.t('form.toy_type.mixed') : '’Ñ’•÷Ä ’ø’•’Ω’°’Ø’°’∂’∏÷Ç÷Å ’±’•÷Ä ’¢÷Ä’•’∂’§’∏’æ'}</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">${window.t ? window.t('form.count') : '’î’°’∂’°’Ø'} <span class="required">*</span></label>
                    <input type="number" name="count" class="form-input" required>
                </div>
                <div class="form-checkbox">
                    <input type="checkbox" id="nominal" name="nominal">
                    <label for="nominal">${window.t ? window.t('form.nominal') : '‘±’∂’æ’°’∂’°’Ø’°’∂ (’°’∂’∏÷Ç’∂’∂’•÷Ä’´ ’∞’•’ø)'}</label>
                </div>
                <div id="namesContainer" class="names-container">
                    <label class="form-label">${window.t ? window.t('form.names') : '‘±’∂’∏÷Ç’∂’∂’•÷Ä'}</label>
                    <div id="namesList"></div>
                    <button type="button" class="add-name-btn" onclick="addNameField()">+ ${window.t ? window.t('form.add_name') : '‘±’æ’•’¨’°÷Å’∂’•’¨ ’°’∂’∏÷Ç’∂'}</button>
                </div>
                <div class="form-group">
                    <label class="form-label">${window.t ? window.t('form.packaging') : '’ì’°’©’•’©’°’æ’∏÷Ä’¥’°’∂ ’ø’•’Ω’°’Ø'} <span class="required">*</span></label>
                    <select name="packaging" class="form-select" required>
                        <option value="bag">${window.t ? window.t('form.packaging.bag') : '’è’∏’∫÷Ä’°’Ø’∏÷Ç’¥'}</option>
                        <option value="box">${window.t ? window.t('form.packaging.box') : '’è’∏÷Ç÷É’∏÷Ç’¥'}</option>
                        <option value="none">${window.t ? window.t('form.packaging.none') : '‘±’º’°’∂÷Å ÷É’°’©’•’©’°’æ’∏÷Ä’¥’°’∂'}</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">${window.t ? window.t('form.notes') : '‘±’µ’¨ ’∂’∑’∏÷Ç’¥’∂’•÷Ä'}</label>
                    <textarea name="notes" class="form-textarea" placeholder="${window.t ? window.t('form.notes.placeholder') : '’Ü’Ø’°÷Ä’°’£÷Ä’•÷Ñ ’±’•÷Ä ÷Å’°’∂’Ø’∏÷Ç’©’µ’∏÷Ç’∂’∂’•÷Ä’® ’¥’°’∂÷Ä’°’¥’°’Ω’∂...'}"></textarea>
                </div>
            `;
        } else if (offer.fields === 'special_for_you') {
            formHTML = `
                <div class="form-group">
                    <label class="form-label">${window.t ? window.t('form.count') : '’î’°’∂’°’Ø'} <span class="required">*</span></label>
                    <input type="number" name="count" class="form-input" required>
                </div>
                <div class="form-group">
                    <label class="form-label">${window.t ? window.t('form.names') : '‘±’∂’∏÷Ç’∂’∂’•÷Ä'} <span class="required">*</span></label>
                    <div id="namesList"></div>
                    <button type="button" class="add-name-btn" onclick="addNameField()">+ ${window.t ? window.t('form.add_name') : '‘±’æ’•’¨’°÷Å’∂’•’¨ ’°’∂’∏÷Ç’∂'}</button>
                </div>
                <div class="form-group">
                    <label class="form-label">${window.t ? window.t('form.packaging') : '’ì’°’©’•’©’°’æ’∏÷Ä’¥’°’∂ ’ø’•’Ω’°’Ø'} <span class="required">*</span></label>
                    <select name="packaging" class="form-select" required>
                        <option value="bag">${window.t ? window.t('form.packaging.bag') : '’è’∏’∫÷Ä’°’Ø’∏÷Ç’¥'}</option>
                        <option value="box">${window.t ? window.t('form.packaging.box') : '’è’∏÷Ç÷É’∏÷Ç’¥'}</option>
                        <option value="none">${window.t ? window.t('form.packaging.none') : '‘±’º’°’∂÷Å ÷É’°’©’•’©’°’æ’∏÷Ä’¥’°’∂'}</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">${window.t ? window.t('form.notes') : '‘±’µ’¨ ’∂’∑’∏÷Ç’¥’∂’•÷Ä'}</label>
                    <textarea name="notes" class="form-textarea" placeholder="${window.t ? window.t('form.notes.placeholder') : '’Ü’Ø’°÷Ä’°’£÷Ä’•÷Ñ ’±’•÷Ä ÷Å’°’∂’Ø’∏÷Ç’©’µ’∏÷Ç’∂’∂’•÷Ä’® ’¥’°’∂÷Ä’°’¥’°’Ω’∂...'}"></textarea>
                </div>
            `;
        } else if (offer.fields === 'christmas_together' || offer.fields === 'seasons_best' || offer.fields === 'collections') {
            formHTML = `
                <div class="form-checkbox">
                    <input type="checkbox" id="nominal" name="nominal">
                    <label for="nominal">${window.t ? window.t('form.nominal') : '‘±’∂’æ’°’∂’°’Ø’°’∂ (’°’∂’∏÷Ç’∂’∂’•÷Ä’´ ’∞’•’ø)'}</label>
                </div>
                <div id="namesContainer" class="names-container">
                    <label class="form-label">${window.t ? window.t('form.names') : '‘±’∂’∏÷Ç’∂’∂’•÷Ä'}</label>
                    <div id="namesList"></div>
                    <button type="button" class="add-name-btn" onclick="addNameField()">+ ${window.t ? window.t('form.add_name') : '‘±’æ’•’¨’°÷Å’∂’•’¨ ’°’∂’∏÷Ç’∂'}</button>
                </div>
                <div class="form-group">
                    <label class="form-label">${window.t ? window.t('form.packaging') : '’ì’°’©’•’©’°’æ’∏÷Ä’¥’°’∂ ’ø’•’Ω’°’Ø'} <span class="required">*</span></label>
                    <select name="packaging" class="form-select" required>
                        <option value="bag">${window.t ? window.t('form.packaging.bag') : '’è’∏’∫÷Ä’°’Ø’∏÷Ç’¥'}</option>
                        <option value="box">${window.t ? window.t('form.packaging.box') : '’è’∏÷Ç÷É’∏÷Ç’¥'}</option>
                        <option value="none">${window.t ? window.t('form.packaging.none') : '‘±’º’°’∂÷Å ÷É’°’©’•’©’°’æ’∏÷Ä’¥’°’∂'}</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">${window.t ? window.t('form.notes') : '‘±’µ’¨ ’∂’∑’∏÷Ç’¥’∂’•÷Ä'}</label>
                    <textarea name="notes" class="form-textarea" placeholder="${window.t ? window.t('form.notes.placeholder') : '’Ü’Ø’°÷Ä’°’£÷Ä’•÷Ñ ’±’•÷Ä ÷Å’°’∂’Ø’∏÷Ç’©’µ’∏÷Ç’∂’∂’•÷Ä’® ’¥’°’∂÷Ä’°’¥’°’Ω’∂...'}"></textarea>
                </div>
            `;
        }



        formHTML += `<button type="submit" class="submit-btn" id="submitBtn">${window.t ? window.t('form.submit') : 'üéÅ ’à÷Ç’≤’°÷Ä’Ø’•’¨ ’∫’°’ø’æ’•÷Ä’®'}</button>`;
        form.innerHTML = formHTML;

        // Initialize delivery handlers after form is rendered
        setTimeout(() => {
            initializeDelivery();
        }, 0);

        // Setup nominal checkbox handler
        const nominalCheckbox = document.getElementById('nominal');
        if (nominalCheckbox) {
            nominalCheckbox.addEventListener('change', (e) => {
                const namesContainer = document.getElementById('namesContainer');
                if (e.target.checked) {
                    namesContainer.classList.add('show');
                    if (offer.fields === 'special_for_you') {
                        addNameField();
                    }
                } else {
                    namesContainer.classList.remove('show');
                }
            });
        }

        // For special_for_you offer, always show names
        if (offer.fields === 'special_for_you') {
            addNameField();
        }

        // Form submission
        form.addEventListener('submit', handleFormSubmit);
    }

    let nameCounter = 0;

    function addNameField() {
        const namesList = document.getElementById('namesList');
        const nameGroup = document.createElement('div');
        nameGroup.className = 'name-input-group';
        nameGroup.innerHTML = `
            <input type="text" name="names[]" class="form-input" placeholder="${window.t ? window.t('form.names') : '‘±’∂’∏÷Ç’∂'}" required>
            <button type="button" class="remove-name-btn" onclick="removeNameField(this)">${window.t ? window.t('form.remove_name') : '‚úï'}</button>
        `;
        namesList.appendChild(nameGroup);
        nameCounter++;
    }

    function removeNameField(btn) {
        btn.parentElement.remove();
    }

    async function handleFormSubmit(e) {
        e.preventDefault();

        const submitBtn = document.getElementById('submitBtn');
        const formMessage = document.getElementById('formMessage');

        // Validate product/image selection
        if (offer.type === 'products' && selectedProducts.length === 0 && offer.fields !== 'corporate') {
            showMessage(window.t ? window.t('message.select_product') : '‘Ω’∂’§÷Ä’∏÷Ç’¥ ’•’∂÷Ñ ’®’∂’ø÷Ä’•’¨ ’°’º’∂’æ’°’¶’∂ ’¥’•’Ø ’°’∫÷Ä’°’∂÷Ñ', 'error');
            return;
        }

        if (offer.type === 'images' && selectedImages.length === 0) {
            showMessage(window.t ? window.t('message.select_image') : '‘Ω’∂’§÷Ä’∏÷Ç’¥ ’•’∂÷Ñ ’®’∂’ø÷Ä’•’¨ ’°’º’∂’æ’°’¶’∂ ’¥’•’Ø ’∂’Ø’°÷Ä', 'error');
            return;
        }

        submitBtn.disabled = true;
        submitBtn.innerHTML = window.t ? window.t('form.submit.sending') : '‚è≥ ’à÷Ç’≤’°÷Ä’Ø’æ’∏÷Ç’¥ ’ß...';

        const formData = new FormData(e.target);
        const data = {
            offer_type: offerType,
            selected_images: offer.type === 'images' ? selectedImages : [],
            selected_products: offer.type === 'products' ? selectedProducts.map(p => ({
                id: p.id,
                name: p.name,
                price: p.price
            })) : selectedImages,
            delivery_method: selectedDeliveryMethod,
            delivery_price: selectedDeliveryPrice,
            delivery_address: document.getElementById('delivery-address')?.value || ''
        };

        // Collect form fields
        let hasEmail = false;
        for (let [key, value] of formData.entries()) {
            if (key === 'names[]') {
                if (!data.names) data.names = [];
                data.names.push(value);
            } else {
                data[key] = value;
                if (key === 'customer_email') hasEmail = true;
            }
        }

        // Validate required fields
        if (!data.customer_name || !data.customer_phone || !hasEmail) {
            showMessage(window.t ? window.t('message.required_fields') : '‘Ω’∂’§÷Ä’∏÷Ç’¥ ’•’∂÷Ñ ’¨÷Ä’°÷Å’∂’•’¨ ’¢’∏’¨’∏÷Ä ’∫’°÷Ä’ø’°’§’´÷Ä ’§’°’∑’ø’•÷Ä’®', 'error');
            submitBtn.disabled = false;
            submitBtn.innerHTML = window.t ? window.t('form.submit') : 'üéÅ ’à÷Ç’≤’°÷Ä’Ø’•’¨ ’∫’°’ø’æ’•÷Ä’®';
            return;
        }

        // Map field names to match API expectations
        const apiData = {
            customer_name: data.customer_name,
            phone: data.customer_phone,
            email: data.customer_email,
            comment: data.notes || data.comment || '',
            offer_type: data.offer_type,
            selected_products: data.selected_products,
            selected_images: data.selected_images,
            delivery_method: data.delivery_method,
            delivery_price: data.delivery_price,
            delivery_address: data.delivery_address,
            form_data: {
                school_name: data.school_name,
                class_number: data.class_number,
                student_count: data.student_count,
                boys_girls: data.boys_girls,
                nominal: data.nominal || false,
                names: data.names || [],
                packaging: data.packaging,
                delivery_date: data.delivery_date,
                brand_name: data.brand_name,
                toy_type: data.toy_type,
                count: data.count
            }
        };

        // Handle checkbox
        apiData.form_data.nominal = document.getElementById('nominal')?.checked || false;

        try {
            const response = await fetch(`${BASE_PREFIX}/api/order_offer`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(apiData)
            });

            const result = await response.json();

            if (response.ok && result.success) {
                showMessage(window.t ? window.t('message.success') : '‚úÖ ’á’∂’∏÷Ä’∞’°’Ø’°’¨’∏÷Ç’©’µ’∏÷Ç’∂! ’Å’•÷Ä ’∫’°’ø’æ’•÷Ä’® ’∞’°’ª’∏’≤’∏÷Ç’©’µ’°’¥’¢ ’∏÷Ç’≤’°÷Ä’Ø’æ’•’¨ ’ß÷â ’Ñ’•’∂÷Ñ ’∑’∏÷Ç’ø’∏’æ ’Ø’Ø’°’∫’æ’•’∂÷Ñ ’±’•’¶ ’∞’•’ø÷â', 'success');
                e.target.reset();
                selectedProducts = [];
                selectedImages = [];
                document.querySelectorAll('.product-card.selected').forEach(card => card.classList.remove('selected'));
                document.querySelectorAll('.gallery-card.selected').forEach(card => card.classList.remove('selected'));
                updateSelectedProductsList();
                updateSelectedImagesList();
                document.getElementById('namesContainer')?.classList.remove('show');
            } else {
                showMessage(result.error || (window.t ? window.t('message.error') : '‚ùå ’ç’≠’°’¨ ’ß ’ø’•’≤’´ ’∏÷Ç’∂’•÷Å’•’¨÷â ‘Ω’∂’§÷Ä’∏÷Ç’¥ ’•’∂÷Ñ ÷É’∏÷Ä’±’•’¨ ’Ø÷Ä’Ø’´’∂÷â'), 'error');
            }
        } catch (error) {
            console.error('Error:', error);
            showMessage(window.t ? window.t('message.connection_error') : '‚ùå ‘ø’°’∫’´ ’≠’∂’§’´÷Ä÷â ‘Ω’∂’§÷Ä’∏÷Ç’¥ ’•’∂÷Ñ ’Ω’ø’∏÷Ç’£’•’¨ ’´’∂’ø’•÷Ä’∂’•’ø ’Ø’°’∫’® ÷á ÷É’∏÷Ä’±’•’¨ ’Ø÷Ä’Ø’´’∂÷â', 'error');
        } finally {
            submitBtn.disabled = false;
            submitBtn.innerHTML = window.t ? window.t('form.submit') : 'üéÅ ’à÷Ç’≤’°÷Ä’Ø’•’¨ ’∫’°’ø’æ’•÷Ä’®';
        }
    }

    function showMessage(message, type) {
        const formMessage = document.getElementById('formMessage');
        formMessage.textContent = message;
        formMessage.className = `message ${type} show`;
        setTimeout(() => {
            formMessage.classList.remove('show');
        }, 5000);
    }

    // Snowflake animation
    function createSnowflake() {
        const snowflake = document.createElement('div');
        snowflake.style.cssText = `
            position: fixed;
            top: -10px;
            left: ${Math.random() * 100}%;
            color: white;
            font-size: 1.5em;
            opacity: 0.8;
            pointer-events: none;
            z-index: 1;
            animation: snowfall ${5 + Math.random() * 5}s linear forwards;
        `;
        snowflake.textContent = ['‚ùÑÔ∏è', '‚ú®', '‚õÑ'][Math.floor(Math.random() * 3)];
        document.getElementById('snowflakes-container').appendChild(snowflake);
        setTimeout(() => snowflake.remove(), 10000);
    }

    const style = document.createElement('style');
    style.textContent = `
        @keyframes snowfall {
            0% { transform: translateY(-10vh); opacity: 1; }
            100% { transform: translateY(100vh); opacity: 0; }
        }
    `;
    document.head.appendChild(style);

    setInterval(createSnowflake, 400);

    // Language change handler
    function setupLanguageListener() {
        console.log('Language listener set up');
        window.addEventListener('languageChanged', function (event) {
            updateOfferContent();
            loadCatalog();
            renderForm();
        });
    }

    // Initialize
    document.addEventListener('DOMContentLoaded', function () {
        updateOfferContent();
        loadCatalog();
        renderForm();
        setupLanguageListener();
    });
</script>

{% endblock %}